"use strict";function handleAjax(t){t.url&&(t.msg+="，页面即将跳转～"),1==t.code?toast.success(t.msg,"success"):toast.error(t.msg,"danger");"refresh"==t.url?setTimeout(function(){location.href=location.href},1500):t.url&&setTimeout(function(){location.href=t.url},1500)}$(function(){$(".ajax-get").click(function(){var t,e=this;return $(this).hasClass("confirm")&&!confirm("确认要执行该操作吗?")||((t=$(this).attr("href"))||(t=$(this).attr("url")))&&$.get(t).success(function(t){1==t.code?(t.url?toast.success(t.msg+" 页面即将自动跳转~","success"):toast.success(t.msg,"success"),setTimeout(function(){t.url?location.href=t.url:$(e).hasClass("no-refresh")?$("#top-alert").find("button").click():location.reload()},3e3)):(toast.error(t.msg),setTimeout(function(){t.url?location.href=t.url:$("#top-alert").find("button").click()},15e3))}),!1}),$(".ajax-post").click(function(){var t,e,i;toast.showLoading();var o=$(this).attr("target-form"),n=this,r=!1;if("submit"==$(this).attr("type")||(t=$(this).attr("href"))||(t=$(this).attr("url"))){if(i=$("."+o),"true"===$(this).attr("hide-data"))e=(i=$(".hide-data")).serialize();else{if(null==i.get(0))return toast.error("没有可操作数据。","danger"),!1;if("FORM"==i.get(0).nodeName){if($(this).hasClass("confirm"))if(s=(s=$(n).attr("confirm-info"))||"确认要执行该操作吗?",!confirm(s))return toast.hideLoading(),!1;t=void 0!==$(this).attr("url")?$(this).attr("url"):i.get(0).action,e=i.serialize()}else if("INPUT"==i.get(0).nodeName||"SELECT"==i.get(0).nodeName||"TEXTAREA"==i.get(0).nodeName){if(i.each(function(t,e){"checkbox"==e.type&&1==e.checked&&(r=!0)}),r&&$(this).hasClass("confirm"))if(s=(s=$(n).attr("confirm-info"))||"确认要执行该操作吗?",!confirm(s))return toast.hideLoading(),!1;e=i.serialize()}else{var s;if($(this).hasClass("confirm"))if(s=(s=$(n).attr("confirm-info"))||"确认要执行该操作吗?",!confirm(s))return toast.hideLoading(),!1;e=i.find("input,select,textarea").serialize()}}if(""==e&&"true"!=$(this).attr("hide-data"))return toast.hideLoading(),toast.error("请勾选操作对象!。","danger"),!1;$(n).addClass("disabled").attr("autocomplete","off").prop("disabled",!0),$.post(t,e).success(function(t){1==t.code?(t.url?toast.success(t.msg+" 页面即将自动跳转~","success"):toast.success(t.msg,"success"),setTimeout(function(){t.url?location.href=t.url:$(n).hasClass("no-refresh")?($("#top-alert").find("button").click(),$(n).removeClass("disabled").prop("disabled",!1)):location.reload()},1500)):(toast.error(t.msg,"error"),setTimeout(function(){t.url?location.href=t.url:($("#top-alert").find("button").click(),$(n).removeClass("disabled").prop("disabled",!1))},1500))}),toast.hideLoading()}return!1}),$(document).on("submit","form.ajax-form",function(t){t.preventDefault();var e=$(this).attr("data-confirm"),o=$(this);if(e){if(!confirm("确认要执行该操作吗?"))return!1;i()}else i();function i(){$("[type=submit]",o).addClass("disabled");var t=o.attr("action"),e=o.attr("method");if(!t)return!1;e||(e="get");var i=o.serialize();("post"==e?$.post:$.get)(t,i,function(t){handleAjax(t),$("[type=submit]",o).removeClass("disabled")})}return!1})}),function(o,t,e){if(void 0===o)throw new Error("muu requires jQuery");o.muu||(o.muu=function(t){o.isPlainObject(t)&&o.extend(o.muu,t)});var n=function(){o(".nav-type").unbind("change"),o(".nav-type").change(function(){var t=o(this);switch(t.val()){case"module":t.closest("li>div").children("select.module").show().change(),t.closest("li>div").children("input.url").hide();break;case"custom":t.closest("li>div").children("select.module").hide(),t.closest("li>div").children("input.url").show(),t.closest("li>div").children("input.title").val(""),t.closest("li>div").children("input.url").val("")}}),o(".module").unbind("change"),o(".module").change(function(){var t=o(this),e=t.find("option:selected").text(),i=t.val();t.closest("li>div").children("input.title").val(e),t.closest("li>div").children("input.url").val(i),t.closest("li>div").next().children("select.chosen-icons").attr("data-value","icon-"+t.find("option:selected").data("icon")),n()}),o(".add-new").unbind("click"),o(".add-new").click(function(){o(".channel-ul").append(o("#one-nav").html()),n()}),o(".add-one").unbind("click"),o(".add-one").click(function(){o(this).closest(".pLi").after(o("#one-nav").html()),n()}),o(".add-two").unbind("click"),o(".add-two").click(function(){o(this).closest("li").after(o("#two-nav").html()),n()}),o(".remove-li").unbind("click"),o(".remove-li").click(function(){1<o(this).parents("form").find(".pLi").length?(o(this).closest("li").remove(),n()):toast.error("不能再减了~")}),o(".add-child").unbind("click"),o(".add-child").click(function(){0==o(this).closest("li").find(".ul-2").length&&o(this).closest("li").append('<div class="clearfix"></div><ul class="ul-2"  style="display: block;"></ul>'),o(this).closest("li").find(".ul-2").prepend(o("#two-nav").html()),n()}),o(".channel-ul .pLi").each(function(t,e){o(this).attr("data-id",t),o(this).find(".sort").val(o(this).attr("data-order"))}),o(".ul-2 li").each(function(t,e){o(this).find(".pid").val(o(this).parents(".pLi").attr("data-id")),o(this).find(".sort").val(o(this).attr("data-order"))}),o(".channel-ul").off("click").on("click","label.target-blank",function(t){t.preventDefault(),o(this).prev().prop("checked")?(o(this).prev().prop("checked",!1),o(this).closest(".new-blank").find(".target_input").val(0)):(o(this).prev().prop("checked",!0),o(this).closest(".new-blank").find(".target_input").val(1))})};n();o.muu({channel_sort:function(){o(".channel-ul").sortable({trigger:".sort-handle-1",selector:"li",dragCssClass:"",finish:function(){n()}}),o(".channel-ul .ul-2").sortable({trigger:".sort-handle-2",selector:"li",dragCssClass:"",finish:function(){n()}})},channel_bind_color:function(){o(".simpleColorContainer").remove(),o(".simple_color_callback").simpleColor({boxWidth:15,boxHeight:15,cellWidth:15,cellHeight:15,chooserCSS:{"z-index":1200},displayCSS:{border:0}})}})}(jQuery,window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(l,o,c){if(void 0===l)throw new Error("ZUI requires jQuery");l.zui||(l.zui=function(t){l.isPlainObject(t)&&l.extend(l.zui,t)});var e={all:-1,left:0,middle:1,right:2},i=0;l.zui({uuid:function(t){var e=1e3*(new Date).getTime()+i++%1e3;return t?e:e.toString(36)},callEvent:function(t,e,i){if(l.isFunction(t)){i!==c&&(t=l.proxy(t,i));var o=t(e);return e&&(e.result=o),!(o!==c&&!o)}return 1},clientLang:function(){var t,e=o.config;if(void 0!==e&&e.clientLang&&(t=e.clientLang),!t){var i=l("html").attr("lang");t=i||(navigator.userLanguage||navigator.userLanguage||"zh_cn")}return t.replace("-","_").toLowerCase()},strCode:function(t){var e=0;if(t&&t.length)for(var i=0;i<t.length;++i)e+=i*t.charCodeAt(i);return e},getMouseButtonCode:function(t){return"number"!=typeof t&&(t=e[t]),t!==c&&null!==t||(t=-1),t}}),l.fn.callEvent=function(t,e,i){var o=l(this),n=t.indexOf(".zui."),r=n<0?t:t.substring(0,n),s=l.Event(r,e);if(i===c&&0<n&&(i=o.data(t.substring(n+1))),i&&i.options){var a=i.options[r];l.isFunction(a)&&(s.result=l.zui.callEvent(a,s,i))}return o.trigger(s),s},l.fn.callComEvent=function(t,e,i){i===c||l.isArray(i)||(i=[i]);var o=this.triggerHandler(e,i),n=t.options[e];return n&&(o=n.apply(t,i)),o}}(jQuery,window,void 0),function(i){i.fn.fixOlPd=function(e){return e=e||10,this.each(function(){var t=i(this);t.css("paddingLeft",Math.ceil(Math.log10(t.children().length))*e+10)})},i(function(){i(".ol-pd-fix,.article ol").fixOlPd()})}(jQuery),function(j,M,S){var R="zui.droppable",o={target:".droppable-target",deviation:5,sensorOffsetX:0,sensorOffsetY:0,dropToClass:"drop-to"},n=0,r=function(t,e){var i=this;i.id=n++,i.$=j(t),i.options=j.extend({},o,i.$.data(),e),i.init()};r.DEFAULTS=o,r.NAME=R,r.prototype.trigger=function(t,e){return j.zui.callEvent(this.options[t],e,this)},r.prototype.init=function(){var a,l,c,u,f,d,o,h,p,g,v,m,n,b=this,r=b.$,$=b.options,w=$.deviation,s="."+R+"."+b.id,y="mousedown"+s,C="mouseup"+s,k="mousemove"+s,x=$.selector,L=$.handle,E=$.flex,t=$.container,_=$.canMoveHere,T=$.dropToClass,O=r,z=!1,A=t?j($.container).first():x?r:j("body"),P=function(t){if(z&&(v={left:t.pageX,top:t.pageY},!(S.abs(v.left-h.left)<w&&S.abs(v.top-h.top)<w))){if(null===c){var e=A.css("position");"absolute"!=e&&"relative"!=e&&"fixed"!=e&&(d=e,A.css("position","relative")),c=O.clone().removeClass("drag-from").addClass("drag-shadow").css({position:"absolute",width:O.outerWidth(),transition:"none"}).appendTo(A),O.addClass("dragging"),b.trigger("start",{event:t,element:O,targets:a})}var i={left:v.left-g.left,top:v.top-g.top},o={left:i.left-p.left,top:i.top-p.top};c.css(o),j.extend(m,v);var n=!1;u=!1,E||a.removeClass(T);var s=null;if(a.each(function(){var t=j(this),e=t.offset(),i=t.outerWidth(),o=t.outerHeight(),n=e.left+$.sensorOffsetX,r=e.top+$.sensorOffsetY;if(v.left>n&&v.top>r&&v.left<n+i&&v.top<r+o&&(s&&s.removeClass(T),s=t,!$.nested))return!1}),s){u=!0;var r=s.data("id");O.data("id")!=r&&(f=!1),(null===l||l.data("id")!==r&&!f)&&(n=!0),l=s,E&&a.removeClass(T),l.addClass(T)}E?null!==l&&l.length&&(u=!0):(O.toggleClass("drop-in",u),c.toggleClass("drop-in",u)),_&&!1===_(O,l)||b.trigger("drag",{event:t,isIn:u,target:l,element:O,isNew:n,selfTarget:f,clickOffset:g,offset:i,position:{left:i.left-p.left,top:i.top-p.top},mouseOffset:v}),t.preventDefault()}},D=function(t){if(j(M).off(s),clearTimeout(n),z){if(z=!1,d&&A.css("position",d),null===c)return O.removeClass("drag-from"),void b.trigger("always",{event:t,cancel:!0});u||(l=null);var e={left:(v=t?{left:t.pageX,top:t.pageY}:m).left-g.left,top:v.top-g.top},i={left:v.left-m.left,top:v.top-m.top};m.left=v.left,m.top=v.top;var o={event:t,isIn:u,target:l,element:O,isNew:!f&&null!==l,selfTarget:f,offset:e,mouseOffset:v,position:{left:e.left-p.left,top:e.top-p.top},lastMouseOffset:m,moveOffset:i};b.trigger("beforeDrop",o)&&u&&b.trigger("drop",o),a.removeClass(T),O.removeClass("dragging").removeClass("drag-from"),c.remove(),c=null,b.trigger("finish",o),b.trigger("always",o),t&&t.preventDefault()}},e=function(t){var e=j.zui.getMouseButtonCode($.mouseButton);if(!(-1<e&&t.button!==e)){var i=j(this);x&&(O=L?i.closest(x):i),O.hasClass("drag-shadow")||$.before&&!1===$.before({event:t,element:O})||(z=!0,a=j.isFunction($.target)?$.target(O,r):A.find($.target),f=!(u=!1),d=c=l=null,o=O.offset(),(p=A.offset()).top=p.top-A.scrollTop(),p.left=p.left-A.scrollLeft(),h={left:t.pageX,top:t.pageY},m=j.extend({},h),g={left:h.left-o.left,top:h.top-o.top},O.addClass("drag-from"),j(M).on(k,P).on(C,D),n=setTimeout(function(){j(M).on(y,D)},10),t.preventDefault(),$.stopPropagation&&t.stopPropagation())}};L?r.on(y,L,e):x?r.on(y,x,e):r.on(y,e)},r.prototype.destroy=function(){var t="."+R+"."+this.id;this.$.off(t),j(M).off(t),this.$.data(R,null)},r.prototype.reset=function(){this.destroy(),this.init()},j.fn.droppable=function(o){return this.each(function(){var t=j(this),e=t.data(R),i="object"==(void 0===o?"undefined":_typeof(o))&&o;e||t.data(R,e=new r(this,i)),"string"==typeof o&&e[o]()})},j.fn.droppable.Constructor=r}(jQuery,document,Math),$(function(){$(".check-all").click(function(){$(".ids").prop("checked",this.checked)}),$(".ids").click(function(){$(".ids").each(function(t){if(!this.checked)return $(".check-all").prop("checked",!1),!1;$(".check-all").prop("checked",!0)})}),$(".text").focus(function(){$(this).addClass("focus")}).blur(function(){$(this).removeClass("focus")}),$("textarea").focus(function(){$(this).closest(".textarea").addClass("focus")}).blur(function(){$(this).closest(".textarea").removeClass("focus")})});var admin_image={removeImage:function(t,e){this.upAttachVal("del",e,t),t.parents(".each").remove()},upAttachVal:function(t,e,i){var o=i.parents(".controls").find(".attach"),n=o.val().split(","),r=[];for(var s in n)""!==n[s]&&n[s]!==e.toString()&&r.push(n[s]);return"add"===t&&r.push(e),o.val(r.join(",")),r}},toast={success:function(t){toast.show(t,{placement:"center",type:"success",close:!0})},error:function(t){toast.show(t,{placement:"center",type:"danger",close:!0})},info:function(t){toast.show(t,{placement:"center",type:"info",close:!0})},warning:function(t,e){toast.show(t,{placement:"center",type:"warning",close:!0})},show:function(t,e){$.zui?$.zui.messager.show(t,e):$.messager.show(t,e)},showLoading:function(){$("body").append('<div class="big_loading"><img src="/static/common/images/big_loading.gif"/></div>')},hideLoading:function(){$("div").remove(".big_loading")}};!function(s){var t=window.Think={};t||s.error("ThinkPHP基础配置没有正确加载！"),t.parse_url=function(t){var e=t.match(/^(?:([a-z]+):\/\/)?([\w-]+(?:\.[\w-]+)+)?(?::(\d+))?([\w-\/]+)?(?:\?((?:\w+=[^#&=\/]*)?(?:&\w+=[^#&=\/]*)*))?(?:#([\w-]+))?$/i);return e||s.error("url格式不正确！"),{scheme:e[1],host:e[2],port:e[3],path:e[4],query:e[5],fragment:e[6]}},t.parse_str=function(t){var e,i=t.split("&"),o={};for(val in i)o[(e=i[val].split("="))[0]]=e[1];return o},t.parse_name=function(t,e){return e?(t.replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),t.replace(/[a-z]/,function(t){return t.toUpperCase()})):0===(t=t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})).indexOf("_")&&(t=t.substr(1)),t},t.Url=function(t,e,i){var o=this.parse_url(t),n=[],r={};return o.path||s.error("url格式错误！"),0===(t=o.path).indexOf("/")?(0==this.MODEL[0]&&s.error("该URL模式不支持使用路由!("+t+")"),"/"==t.substr(-1)&&(t=t.substr(0,t.length-1)),t="/"+(t="/"==this.DEEP?t.substr(1):t.substr(1).replace(/\//g,this.DEEP))):((n=[(n=t.split("/")).pop(),n.pop(),n.pop()].reverse())[1]||s.error("ThinkPHP.Url("+t+")没有指定控制器"),n[0]&&(r[this.VAR[0]]=this.MODEL[1]?n[0].toLowerCase():n[0]),r[this.VAR[1]]=this.MODEL[1]?this.parse_name(n[1]):n[1],r[this.VAR[2]]=n[2].toLowerCase(),t="?"+s.param(r)),"string"==typeof e?e=this.parse_str(e):s.isPlainObject(e)||(e={}),o.query&&s.extend(e,this.parse_str(o.query)),e&&(t+="&"+s.param(e)),0!=this.MODEL[0]&&(t=t.replace("?"+(n[0]?this.VAR[0]:this.VAR[1])+"=","/").replace("&"+this.VAR[1]+"=",this.DEEP).replace("&"+this.VAR[2]+"=",this.DEEP).replace(/(\w+=&)|(&?\w+=$)/g,"").replace(/[&=]/g,this.DEEP),!1!==i&&(i=i||this.MODEL[2].split("|")[0])&&(t+="."+i)),t=this.APP+t},t.setValue=function(t,e){var i,o,n=t.substr(0,1),r=0;if(""!==e)if((i=s("#"===n||"."===n?t:"[name='"+t+"']")).eq(0).is(":radio"))i.filter("[value='"+e+"']").each(function(){this.checked=!0});else if(i.eq(0).is(":checkbox"))for(s.isArray(e)?o=e:(o=new Array)[0]=e,r=0,len=o.length;r<len;r++)i.filter("[value='"+o[r]+"']").each(function(){this.checked=!0});else i.val(e)}}(jQuery),$(function(){var t=$('[data-toggle="can_update"]').val(),e=$('[data-toggle="version"]').val();1==t&&$.get("https://www.muucmf.cn/muucmf/sysupdate/index/enable_version/"+e,function(t){t.code&&new $.zui.Messager("有新的版本更新！",{type:"danger",icon:"bell",placement:"bottom",time:1e4,actions:[{name:"update",icon:"chevron-right",text:"去更新",action:function(){return!(window.location.href="/admin/update/index.html")}}]}).show()})}),$(function(){var t={host:$('[data-toggle="server_name"]').val(),ip:$('[data-toggle="server_ip"]').val(),version:$('[data-toggle="version"]').val(),v:"T5"};$.post("https://www.muucmf.cn/muucmf/index/feedback",t,function(t){})});