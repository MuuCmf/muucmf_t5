"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(l,n,d){if(void 0===l)throw new Error("ZUI requires jQuery");l.zui||(l.zui=function(t){l.isPlainObject(t)&&l.extend(l.zui,t)});var e={all:-1,left:0,middle:1,right:2},t=0;l.zui({uuid:function(){return 1e3*(new Date).getTime()+t++%1e3},callEvent:function(t,e,i){if(l.isFunction(t)){i!==d&&(t=l.proxy(t,i));var n=t(e);return e&&(e.result=n),!(n!==d&&!n)}return 1},clientLang:function(){var t,e=n.config;if(void 0!==e&&e.clientLang&&(t=e.clientLang),!t){var i=l("html").attr("lang");t=i||(navigator.userLanguage||navigator.userLanguage||"zh_cn")}return t.replace("-","_").toLowerCase()},strCode:function(t){var e=0;if(t&&t.length)for(var i=0;i<t.length;++i)e+=i*t.charCodeAt(i);return e},getMouseButtonCode:function(t){return"number"!=typeof t&&(t=e[t]),t!==d&&null!==t||(t=-1),t}}),l.fn.callEvent=function(t,e,i){var n=l(this),o=t.indexOf(".zui."),a=o<0?t:t.substring(0,o),s=l.Event(a,e);if(i===d&&0<o&&(i=n.data(t.substring(o+1))),i&&i.options){var r=i.options[a];l.isFunction(r)&&(s.result=l.zui.callEvent(r,s,i))}return n.trigger(s),s},l.fn.callComEvent=function(t,e,i){i===d||l.isArray(i)||(i=[i]);var n=this.triggerHandler(e,i),o=t.options[e];return o&&(n=o.apply(t,i)),n}}(jQuery,window,void 0),function(i){i.fn.fixOlPd=function(e){return e=e||10,this.each(function(){var t=i(this);t.css("paddingLeft",Math.ceil(Math.log10(t.children().length))*e+10)})},i(function(){i(".ol-pd-fix,.article ol").fixOlPd()})}(jQuery),function(a){var o=function t(e,i){this.$element=a(e),this.options=a.extend({},t.DEFAULTS,i),this.isLoading=!1};o.DEFAULTS={loadingText:"loading..."},o.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.is("input")?"val":"html",o=i.data();t+="Text",o.resetText||i.data("resetText",i[n]()),i[n](o[t]||this.options[t]),setTimeout(a.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(e).attr(e,e)):this.isLoading&&(this.isLoading=!1,i.removeClass(e).removeAttr(e))},this),0)},o.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var t=a.fn.button;a.fn.button=function(n){return this.each(function(){var t=a(this),e=t.data("zui.button"),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data("zui.button",e=new o(this,i)),"toggle"==n?e.toggle():n&&e.setState(n)})},a.fn.button.Constructor=o,a.fn.button.noConflict=function(){return a.fn.button=t,this},a(document).on("click.zui.button.data-api","[data-toggle^=button]",function(t){var e=a(t.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle"),t.preventDefault()})}(jQuery),function(a){var e='[data-dismiss="alert"]',s="zui.alert",n=function(t){a(t).on("click",e,this.close)};n.prototype.close=function(t){function e(){o.trigger("closed."+s).remove()}var i=a(this),n=i.attr("data-target");n||(n=(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,""));var o=a(n);t&&t.preventDefault(),o.length||(o=i.hasClass("alert")?i:i.parent()),o.trigger(t=a.Event("close."+s)),t.isDefaultPrevented()||(o.removeClass("in"),a.support.transition&&o.hasClass("fade")?o.one(a.support.transition.end,e).emulateTransitionEnd(150):e())};var t=a.fn.alert;a.fn.alert=function(i){return this.each(function(){var t=a(this),e=t.data(s);e||t.data(s,e=new n(this)),"string"==typeof i&&e[i].call(t)})},a.fn.alert.Constructor=n,a.fn.alert.noConflict=function(){return a.fn.alert=t,this},a(document).on("click."+s+".data-api",e,n.prototype.close)}(window.jQuery),function(d){var a="zui.pager",s={page:0,recTotal:0,recPerPage:10},r={zh_cn:{prev:"上一页",next:"下一页",first:"第一页",last:"最后一页",goto:"跳转",pageOf:"第 <strong>{page}</strong> 页",totalPage:"共 <strong>{totalPage}</strong> 页",totalCount:"共 <strong>{recTotal}</strong> 项",pageSize:"每页 <strong>{recPerPage}</strong> 项",itemsRange:"第 <strong>{start}</strong> ~ <strong>{end}</strong> 项",pageOfTotal:"第 <strong>{page}</strong>/<strong>{totalPage}</strong> 页"},zh_tw:{prev:"上一頁",next:"下一頁",first:"第一頁",last:"最後一頁",goto:"跳轉",pageOf:"第 <strong>{page}</strong> 頁",totalPage:"共 <strong>{totalPage}</strong> 頁",totalCount:"共 <strong>{recTotal}</strong> 項",pageSize:"每頁 <strong>{recPerPage}</strong> 項",itemsRange:"第 <strong>{start}</strong> ~ <strong>{end}</strong> 項",pageOfTotal:"第 <strong>{page}</strong>/<strong>{totalPage}</strong> 頁"},en:{prev:"Prev",next:"Next",first:"First",last:"Last",goto:"Goto",pageOf:"Page <strong>{page}</strong>",totalPage:"<strong>{totalPage}</strong> pages",totalCount:"<strong>{recTotal}</strong> items",pageSize:"<strong>{recPerPage}</strong> items per page",itemsRange:"From <strong>{start}</strong> to <strong>{end}</strong>",pageOfTotal:"Page <strong>{page}</strong> of <strong>{totalPage}</strong>"}},o=function t(e,i){var n=this;n.name=a,n.$=d(e);var o=(i=n.options=d.extend({},t.DEFAULTS,this.$.data(),i)).lang||"zh_cn";n.lang=d.isPlainObject(o)?d.extend(!0,{},r[o.lang||d.zui.clientLang()],o):r[o],n.state={},n.set(i.page,i.recTotal,i.recPerPage),n.$.on("click",".pager-goto-btn",function(){var t=d(this).closest(".pager-goto"),e=parseInt(t.find(".pager-goto-input").val());NaN!==e&&n.set(e)}).on("click",".pager-item",function(){var t=d(this).data("page");"number"==typeof t&&0<t&&n.set(t)}).on("click",".pager-size-menu [data-size]",function(){var t=d(this).data("size");"number"==typeof t&&0<t&&n.set(-1,-1,t)})};o.prototype.set=function(t,e,i){var n=this;"object"==(void 0===t?"undefined":_typeof(t))&&null!==t&&(i=t.recPerPage,e=t.recTotal,t=t.page);var o=n.state;o||(o=d.extend({},s));var a=d.extend({},o);return"number"==typeof i&&0<i&&(o.recPerPage=i),"number"==typeof e&&0<=e&&(o.recTotal=e),"number"==typeof t&&0<=t&&(o.page=t),o.totalPage=o.recTotal&&o.recPerPage?Math.ceil(o.recTotal/o.recPerPage):1,o.page=Math.max(0,Math.min(o.page,o.totalPage)),o.pageRecCount=o.recTotal,o.page&&o.recTotal&&(o.page<o.totalPage?o.pageRecCount=o.recPerPage:1<o.page&&(o.pageRecCount=o.recTotal-o.recPerPage*(o.page-1))),o.skip=1<o.page?(o.page-1)*o.recPerPage:0,o.start=o.skip+1,o.end=o.skip+o.pageRecCount,o.prev=1<o.page?o.page-1:0,o.next=o.page<o.totalPage?o.page+1:0,n.state=o,a.page===o.page&&a.recTotal===o.recTotal&&a.recPerPage===o.recPerPage||n.$.callComEvent(n,"onPageChange",[o,a]),n.render()},o.prototype.createLinkItem=function(t,e,i){void 0===e&&(e=t);var n=d('<a class="pager-item" data-page="'+t+'"/>').attr("href",t?this.createLink(t,this.state):"###").html(e);return i||(n=d("<li />").append(n).toggleClass("active",t===this.state.page).toggleClass("disabled",!t)),n},o.prototype.createNavItems=function(t){var n=this,o=n.$,e=n.state,i=e.totalPage,a=e.page,s=function(t,e){if(!1!==t){void 0===e&&(e=t);for(var i=t;i<=e;++i)o.append(n.createLinkItem(i))}else o.append(n.createLinkItem(0,e||'<i class="icon icon-ellipsis-h"></i>'))};void 0===t&&(t=n.options.maxNavCount||10),s(1),1<i&&(i<=t?s(2,i):a<t-2?(s(2,t-2),s(!1),s(i)):i-t+2<a?(s(!1),s(i-t+2,i)):(s(!1),s(a-Math.ceil((t-4)/2),a+Math.floor((t-4)/2)),s(!1),s(i)))},o.prototype.createGoto=function(){var t=this.state;return d('<div class="input-group pager-goto" style="width: '+(35+9*(t.page+"").length+25+12*this.lang.goto.length)+'px"><input value="'+t.page+'" type="number" min="1" max="'+t.totalPage+'" placeholder="'+t.page+'" class="form-control pager-goto-input"><span class="input-group-btn"><button class="btn pager-goto-btn" type="button">'+this.lang.goto+"</button></span></div>")},o.prototype.createSizeMenu=function(){var t=this.state,e=d('<ul class="dropdown-menu"></ul>'),i=this.options.pageSizeOptions;"string"==typeof i&&(i=i.split(","));for(var n=0;n<i.length;++n){var o=i[n];"string"==typeof o&&(o=parseInt(o));var a=d('<li><a href="###" data-size="'+o+'">'+o+"</a></li>").toggleClass("active",o===t.recPerPage);e.append(a)}return d('<div class="btn-group pager-size-menu"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">'+this.lang.pageSize.format(t)+' <span class="caret"></span></button></div>').addClass(this.options.menuDirection).append(e)},o.prototype.createElement=function(t,e,i){var n=this,o=d.proxy(n.createLinkItem,n),a=n.lang;switch(t){case"prev":return o(i.prev,a.prev);case"prev_icon":return o(i.prev,'<i class="icon '+n.options.prevIcon+'"></i>');case"next":return o(i.next,a.next);case"next_icon":return o(i.next,'<i class="icon '+n.options.nextIcon+'"></i>');case"first":return o(1,a.first,!0);case"first_icon":return o(1,'<i class="icon '+n.options.firstIcon+'"></i>',!0);case"last":return o(i.totalPage,a.last,!0);case"last_icon":return o(i.totalPage,'<i class="icon '+n.options.lastIcon+'"></i>',!0);case"space":case"|":return d('<li class="space" />');case"nav":case"pages":return void n.createNavItems();case"total_text":return d(('<div class="pager-label">'+a.totalCount+"</div>").format(i));case"page_text":return d(('<div class="pager-label">'+a.pageOf+"</div>").format(i));case"total_page_text":return d(('<div class="pager-label">'+a.totalPage+"</div>").format(i));case"page_of_total_text":return d(('<div class="pager-label">'+a.pageOfTotal+"</div>").format(i));case"page_size_text":return d(('<div class="pager-label">'+a.pageSize+"</div>").format(i));case"items_range_text":return d(('<div class="pager-label">'+a.itemsRange+"</div>").format(i));case"goto":return n.createGoto();case"size_menu":return n.createSizeMenu();default:return d("<li/>").html(t)}},o.prototype.createLink=function(t,e){var i=this.options.linkCreator;return"string"==typeof i?i.format(d.extend({},e,{page:t})):d.isFunction(i)?i(t,e):"#page="+t},o.prototype.render=function(t){var e=this,i=e.state,n=e.options.elementCreator||e.createElement,o=d.isPlainObject(n);"string"==typeof(t=t||e.elements||e.options.elements)&&(t=t.split(",")),e.elements=t,e.$.empty();for(var a=0;a<t.length;++a){var s=d.trim(t[a]),r=(o&&n[s]||n).call(e,s,e.$,i);!1===r&&(r=e.createElement(s,e.$,i)),r instanceof d&&("LI"!==r[0].tagName&&(r=d("<li/>").append(r)),e.$.append(r))}var l=null;return e.$.children("li").each(function(){var t=d(this),e=!!t.children(".pager-item").length;l?l.toggleClass("pager-item-right",!e):e&&t.addClass("pager-item-left"),l=e?t:null}),e.$.callComEvent(e,"onRender",[i]),e},o.DEFAULTS=d.extend({elements:["first_icon","prev_icon","pages","next_icon","last_icon","page_of_total_text","items_range_text","total_text"],prevIcon:"icon-double-angle-left",nextIcon:"icon-double-angle-right",firstIcon:"icon-step-backward",lastIcon:"icon-step-forward",maxNavCount:10,menuDirection:"dropdown",pageSizeOptions:[10,20,30,50,100]},s),d.fn.pager=function(n){return this.each(function(){var t=d(this),e=t.data(a),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data(a,e=new o(this,i)),"string"==typeof n&&e[n]()})},o.NAME=a,d.fn.pager.Constructor=o,d(function(){d('[data-ride="pager"]').pager()})}(jQuery),function(s){var r="zui.tab",n=function(t){this.element=s(t)};n.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.attr("data-target")||t.attr("data-tab");if(i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var n=e.find(".active:last a")[0],o=s.Event("show."+r,{relatedTarget:n});if(t.trigger(o),!o.isDefaultPrevented()){var a=s(i);this.activate(t.parent("li"),e),this.activate(a,a.parent(),function(){t.trigger({type:"shown."+r,relatedTarget:n})})}}},n.prototype.activate=function(t,e,i){function n(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var o=e.find("> .active"),a=i&&s.support.transition&&o.hasClass("fade");a?o.one(s.support.transition.end,n).emulateTransitionEnd(150):n(),o.removeClass("in")};var t=s.fn.tab;s.fn.tab=function(i){return this.each(function(){var t=s(this),e=t.data(r);e||t.data(r,e=new n(this)),"string"==typeof i&&e[i]()})},s.fn.tab.Constructor=n,s.fn.tab.noConflict=function(){return s.fn.tab=t,this},s(document).on("click.zui.tab.data-api",'[data-toggle="tab"], [data-tab]',function(t){t.preventDefault(),s(this).tab("show")})}(window.jQuery),function(n){n.fn.emulateTransitionEnd=function(t){var e=!1,i=this;n(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||n(i).trigger(n.support.transition.end)},t),this},n(function(){n.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(d){var c="zui.collapse",o=function t(e,i){this.$element=d(e),this.options=d.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=d(this.options.parent)),this.options.toggle&&this.toggle()};o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=d.Event("show."+c);if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.$parent&&this.$parent.find(".in");if(e&&e.length){var i=e.data(c);if(i&&i.transitioning)return;e.collapse("hide"),i||e.data(c,null)}var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("in")[n]("auto"),this.transitioning=0,this.$element.trigger("shown."+c)};if(!d.support.transition)return o.call(this);var a=d.camelCase(["scroll",n].join("-"));this.$element.one(d.support.transition.end,d.proxy(o,this)).emulateTransitionEnd(350)[n](this.$element[0][a])}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=d.Event("hide."+c);if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden."+c).removeClass("collapsing").addClass("collapse")};return d.support.transition?void this.$element[e](0).one(d.support.transition.end,d.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var t=d.fn.collapse;d.fn.collapse=function(n){return this.each(function(){var t=d(this),e=t.data(c),i=d.extend({},o.DEFAULTS,t.data(),"object"==(void 0===n?"undefined":_typeof(n))&&n);e||t.data(c,e=new o(this,i)),"string"==typeof n&&e[n]()})},d.fn.collapse.Constructor=o,d.fn.collapse.noConflict=function(){return d.fn.collapse=t,this},d(document).on("click."+c+".data-api","[data-toggle=collapse]",function(t){var e,i=d(this),n=i.attr("data-target")||t.preventDefault()||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),o=d(n),a=o.data(c),s=a?"toggle":i.data(),r=i.attr("data-parent"),l=r&&d(r);a&&a.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+r+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(s)})}(window.jQuery),function(t,e){var i=e(t),n=function(){var t=i.width();e("html").toggleClass("screen-desktop",992<=t&&t<1200).toggleClass("screen-desktop-wide",1200<=t).toggleClass("screen-tablet",768<=t&&t<992).toggleClass("screen-phone",t<768).toggleClass("device-mobile",t<992).toggleClass("device-desktop",992<=t)},o="",a=navigator.userAgent;a.match(/(iPad|iPhone|iPod)/i)?o+=" os-ios":a.match(/android/i)?o+=" os-android":a.match(/Win/i)?o+=" os-windows":a.match(/Mac/i)?o+=" os-mac":a.match(/Linux/i)?o+=" os-linux":a.match(/X11/i)&&(o+=" os-unix"),"ontouchstart"in document.documentElement&&(o+=" is-touchable"),e("html").addClass(o),i.resize(n),n()}(window,jQuery),function(i){var n={zh_cn:'您的浏览器版本过低，无法体验所有功能，建议升级或者更换浏览器。 <a href="http://browsehappy.com/" target="_blank" class="alert-link">了解更多...</a>',zh_tw:'您的瀏覽器版本過低，無法體驗所有功能，建議升級或者更换瀏覽器。<a href="http://browsehappy.com/" target="_blank" class="alert-link">了解更多...</a>',en:'Your browser is too old, it has been unable to experience the colorful internet. We strongly recommend that you upgrade a better one. <a href="http://browsehappy.com/" target="_blank" class="alert-link">Learn more...</a>'},t=function(){var t=this.isIE()||this.isIE10()||!1;if(t)for(var e=10;5<e;e--)if(this.isIE(e)){t=e;break}this.ie=t,this.cssHelper()};t.prototype.cssHelper=function(){var t=this.ie,e=i("html");e.toggleClass("ie",t).removeClass("ie-6 ie-7 ie-8 ie-9 ie-10"),t&&e.addClass("ie-"+t).toggleClass("gt-ie-7 gte-ie-8 support-ie",8<=t).toggleClass("lte-ie-7 lt-ie-8 outdated-ie",t<8).toggleClass("gt-ie-8 gte-ie-9",9<=t).toggleClass("lte-ie-8 lt-ie-9",t<9).toggleClass("gt-ie-9 gte-ie-10",10<=t).toggleClass("lte-ie-9 lt-ie-10",t<10)},t.prototype.tip=function(t){var e=i("#browseHappyTip");e.length||(e=i('<div id="browseHappyTip" class="alert alert-dismissable alert-danger-inverse alert-block" style="position: relative; z-index: 99999"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button><div class="container"><div class="content text-center"></div></div></div>')).prependTo("body"),e.find(".content").html(t||this.browseHappyTip||n[i.zui.clientLang()||"zh_cn"])},t.prototype.isIE=function(t){if(10===t)return this.isIE10();var e=document.createElement("b");return e.innerHTML="\x3c!--[if IE "+(t||"")+"]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length},t.prototype.isIE10=function(){return!1},i.zui({browser:new t}),i(function(){i("body").hasClass("disabled-browser-tip")||i.zui.browser.ie&&i.zui.browser.ie<8&&i.zui.browser.tip()})}(jQuery),Date.ONEDAY_TICKS=864e5,Date.prototype.format||(Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};for(var i in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t}),Date.prototype.addMilliseconds||(Date.prototype.addMilliseconds=function(t){return this.setTime(this.getTime()+t),this}),Date.prototype.addDays||(Date.prototype.addDays=function(t){return this.addMilliseconds(t*Date.ONEDAY_TICKS),this}),Date.prototype.clone||(Date.prototype.clone=function(){var t=new Date;return t.setTime(this.getTime()),t}),Date.isLeapYear||(Date.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0}),Date.getDaysInMonth||(Date.getDaysInMonth=function(t,e){return[31,Date.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}),Date.prototype.isLeapYear||(Date.prototype.isLeapYear=function(){return Date.isLeapYear(this.getFullYear())}),Date.prototype.clearTime||(Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this}),Date.prototype.getDaysInMonth||(Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())}),Date.prototype.addMonths||(Date.prototype.addMonths=function(t){var e=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(e,this.getDaysInMonth())),this}),Date.prototype.getLastWeekday||(Date.prototype.getLastWeekday=function(t){t=t||1;for(var e=this.clone();e.getDay()!=t;)e.addDays(-1);return e.clearTime(),e}),Date.prototype.isSameDay||(Date.prototype.isSameDay=function(t){return t.toDateString()===this.toDateString()}),Date.prototype.isSameWeek||(Date.prototype.isSameWeek=function(t){var e=this.getLastWeekday(),i=e.clone().addDays(7);return e<=t&&t<i}),Date.prototype.isSameYear||(Date.prototype.isSameYear=function(t){return this.getFullYear()===t.getFullYear()}),Date.create||(Date.create=function(t){return t instanceof Date||("number"==typeof t&&t<1e10&&(t*=1e3),t=new Date(t)),t}),Date.timestamp||(Date.timestamp=function(t){return"number"==typeof t?t<1e10&&(t*=1e3):t=Date.create(t).getTime(),t}),String.prototype.format||(String.prototype.format=function(t){var e,i=this;if(0<arguments.length)if(arguments.length<=2&&"object"==(void 0===t?"undefined":_typeof(t)))for(var n in t)void 0!==t[n]&&(e=new RegExp("("+(arguments[1]?arguments[1].replace("0",n):"{"+n+"}")+")","g"),i=i.replace(e,t[n]));else for(var o=0;o<arguments.length;o++)void 0!==arguments[o]&&(e=new RegExp("({["+o+"]})","g"),i=i.replace(e,arguments[o]));return i}),String.prototype.isNum||(String.prototype.isNum=function(t){var e;return null!==t&&(e=/\d*/i,t.match(e)==t)}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var i=this.toString();(void 0===e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),function(s,e,t){"$:nomunge";var i,n=s([]),o=s.resize=s.extend(s.resize,{}),r="setTimeout",a="resize",l=a+"-special-event",d="delay",c="throttleWindow";o[d]=250,o[c]=!0,s.event.special[a]={setup:function(){if(!o[c]&&this[r])return!1;var t=s(this);n=n.add(t),s.data(this,l,{w:t.width(),h:t.height()}),1===n.length&&function t(){i=e[r](function(){n.each(function(){var t=s(this),e=t.width(),i=t.height(),n=s.data(this,l);e===n.w&&i===n.h||t.trigger(a,[n.w=e,n.h=i])}),t()},o[d])}()},teardown:function(){if(!o[c]&&this[r])return!1;var t=s(this);n=n.not(t),t.removeData(l),n.length||clearTimeout(i)},add:function(t){function e(t,e,i){var n=s(this),o=s.data(this,l)||{};o.w=void 0!==e?e:n.width(),o.h=void 0!==i?i:n.height(),a.apply(this,arguments)}return!(!o[c]&&this[r])&&(s.isFunction(t)?(a=t,e):(a=t.handler,void(t.handler=e)));var a}}}(jQuery,void 0),function(a){function o(t,e){var i,n=a.proxy(this.process,this);this.$element=a(a(t).is("body")?window:t),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll."+s+".data-api",n),this.options=a.extend({},o.DEFAULTS,e),this.selector||(this.selector=(this.options.target||(i=a(t).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a"),this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}var s="zui.scrollspy";o.DEFAULTS={offset:10},o.prototype.refresh=function(){var n=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var o=this;this.$body.find(this.selector).map(function(){var t=a(this),e=t.data("target")||t.attr("href"),i=/^#./.test(e)&&a(e);return i&&i.length&&i.is(":visible")&&[[i[n]().top+(!a.isWindow(o.$scrollElement.get(0))&&o.$scrollElement.scrollTop()),e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){o.offsets.push(this[0]),o.targets.push(this[1])})},o.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),n=this.offsets,o=this.targets,a=this.activeTarget;if(i<=e)return a!=(t=o.last()[0])&&this.activate(t);if(a&&e<=n[0])return a!=(t=o[0])&&this.activate(t);for(t=n.length;t--;)a!=o[t]&&e>=n[t]&&(!n[t+1]||e<=n[t+1])&&this.activate(o[t])},o.prototype.activate=function(t){this.activeTarget=t,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=a(e).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate."+s)};var t=a.fn.scrollspy;a.fn.scrollspy=function(n){return this.each(function(){var t=a(this),e=t.data(s),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data(s,e=new o(this,i)),"string"==typeof n&&e[n]()})},a.fn.scrollspy.Constructor=o,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=t,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var t=a(this);t.scrollspy(t.data())})})}(jQuery),function(t,o){var n,a,e="localStorage",i="page_"+t.location.pathname+t.location.search,s=function(){this.slience=!0;try{e in t&&t[e]&&t[e].setItem&&(this.enable=!0,n=t[e])}catch(t){}this.enable||(a={},n={getLength:function(){var t=0;return o.each(a,function(){t++}),t},key:function(e){var i,n=0;return o.each(a,function(t){return n===e?(i=t,!1):void n++}),i},removeItem:function(t){delete a[t]},getItem:function(t){return a[t]},setItem:function(t,e){a[t]=e},clear:function(){a={}}}),this.storage=n,this.page=this.get(i,{})};s.prototype.pageSave=function(){if(o.isEmptyObject(this.page))this.remove(i);else{var t,e=[];for(t in this.page){null===this.page[t]&&e.push(t)}for(t=e.length-1;0<=t;t--)delete this.page[e[t]];this.set(i,this.page)}},s.prototype.pageRemove=function(t){void 0!==this.page[t]&&(this.page[t]=null,this.pageSave())},s.prototype.pageClear=function(){this.page={},this.pageSave()},s.prototype.pageGet=function(t,e){var i=this.page[t];return void 0===e||null!=i?i:e},s.prototype.pageSet=function(t,e){o.isPlainObject(t)?o.extend(!0,this.page,t):this.page[this.serialize(t)]=e,this.pageSave()},s.prototype.check=function(){if(!this.enable&&!this.slience)throw new Error("Browser not support localStorage or enable status been set true.");return this.enable},s.prototype.length=function(){return this.check()?n.getLength?n.getLength():n.length:0},s.prototype.removeItem=function(t){return n.removeItem(t),this},s.prototype.remove=function(t){return this.removeItem(t)},s.prototype.getItem=function(t){return n.getItem(t)},s.prototype.get=function(t,e){var i=this.deserialize(this.getItem(t));return null!=i||void 0===e?i:e},s.prototype.key=function(t){return n.key(t)},s.prototype.setItem=function(t,e){return n.setItem(t,e),this},s.prototype.set=function(t,e){return void 0===e?this.remove(t):(this.setItem(t,this.serialize(e)),this)},s.prototype.clear=function(){return n.clear(),this},s.prototype.forEach=function(t){for(var e=this.length()-1;0<=e;e--){var i=n.key(e);t(i,this.get(i))}return this},s.prototype.getAll=function(){var i={};return this.forEach(function(t,e){i[t]=e}),i},s.prototype.serialize=function(t){return"string"==typeof t?t:JSON.stringify(t)},s.prototype.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},o.zui({store:new s})}(window,jQuery),function(s){var o="zui.searchBox",a=function t(e,n){var o=this;o.name=name,o.$=s(e),o.options=n=s.extend({},t.DEFAULTS,o.$.data(),n);var i=o.$.is(n.inputSelector)?o.$:o.$.find(n.inputSelector);if(i.length){var a=function(){o.changeTimer&&(clearTimeout(o.changeTimer),o.changeTimer=null);var t=o.getSearch();if(t!==o.lastValue){var e=""===t;i.toggleClass("empty",e),o.$.callComEvent(o,"onSearchChange",[t,e]),o.lastValue=t}};o.$input=i=i.first(),o.lastValue=o.getSearch(),i.on(n.listenEvent,function(t){o.changeTimer=setTimeout(function(){a()},n.changeDelay)}).on("focus",function(t){i.addClass("focus"),o.$.callComEvent(o,"onFocus",[t])}).on("blur",function(t){i.removeClass("focus"),o.$.callComEvent(o,"onBlur",[t])}).on("keydown",function(t){var e=0,i=t.witch;27===i&&n.escToClear?(this.setSearch("",!0),a(),e=1):13===i&&n.onPressEnter&&(a(),o.$.callComEvent(o,"onPressEnter",[t])),!1===o.$.callComEvent(o,"onKeyDown",[t])&&(e=1),e&&t.preventDefault()}),o.$.on("click",".search-clear-btn",function(t){o.setSearch("",!0),a(),t.preventDefault()}),a()}else console.error("ZUI: search box init error, cannot find search box input element.")};a.DEFAULTS={inputSelector:'input[type="search"],input[type="text"]',listenEvent:"change input paste",changeDelay:500},a.prototype.getSearch=function(){return this.$input&&s.trim(this.$input.val())},a.prototype.setSearch=function(t,e){var i=this.$input;i&&(i.val(t),e||i.trigger("change"))},a.prototype.focus=function(){this.$input&&this.$input.focus()},s.fn.searchBox=function(n){return this.each(function(){var t=s(this),e=t.data(o),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data(o,e=new a(this,i)),"string"==typeof n&&e[n]()})},a.NAME=o,s.fn.searchBox.Constructor=a}(jQuery),function(y,b){var w="zui.draggable",n={container:"body",move:!0},o=0,a=function(t,e){var i=this;i.$=y(t),i.id=o++,i.options=y.extend({},n,i.$.data(),e),i.init()};a.DEFAULTS=n,a.NAME=w,a.prototype.init=function(){var a,s,r,l,d,t=this.$,i="."+w+"."+this.id,e="mousedown"+i,c="mouseup"+i,p="mousemove"+i,h=this.options,u=h.selector,f=h.handle,g=t,o=y.isFunction(h.move),m=function(t){var e=t.pageX,i=t.pageY;d=!0;var n={left:e-r.x,top:i-r.y};g.removeClass("drag-ready").addClass("dragging"),h.move&&(o?h.move(n,g):g.css(n)),h.drag&&h.drag({event:t,element:g,startOffset:r,pos:n,offset:{x:e-a.x,y:i-a.y},smallOffset:{x:e-l.x,y:i-l.y}}),l.x=e,l.y=i,h.stopPropagation&&t.stopPropagation()},v=function(t){if(y(b).off(i),d){var e={left:t.pageX-r.x,top:t.pageY-r.y};g.removeClass("drag-ready dragging"),h.move&&(o?h.move(e,g):g.css(e)),h.finish&&h.finish({event:t,element:g,startOffset:r,pos:e,offset:{x:t.pageX-a.x,y:t.pageY-a.y},smallOffset:{x:t.pageX-l.x,y:t.pageY-l.y}}),t.preventDefault(),h.stopPropagation&&t.stopPropagation()}else g.removeClass("drag-ready")},n=function(t){var e=y.zui.getMouseButtonCode(h.mouseButton);if(!(-1<e&&t.button!==e)){var i=y(this);if(u&&(g=f?i.closest(u):i),h.before)if(!1===h.before({event:t,element:g}))return;var n=y(h.container),o=g.offset();s=n.offset(),a={x:t.pageX,y:t.pageY},r={x:t.pageX-o.left+s.left,y:t.pageY-o.top+s.top},l=y.extend({},a),d=!1,g.addClass("drag-ready"),t.preventDefault(),h.stopPropagation&&t.stopPropagation(),y(b).on(p,m).on(c,v)}};f?t.on(e,f,n):u?t.on(e,u,n):t.on(e,n)},a.prototype.destroy=function(){var t="."+w+"."+this.id;this.$.off(t),y(b).off(t),this.$.data(w,null)},y.fn.draggable=function(n){return this.each(function(){var t=y(this),e=t.data(w),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data(w,e=new a(this,i)),"string"==typeof n&&e[n]()})},y.fn.draggable.Constructor=a}(jQuery,document),function(M,j,L){var O="zui.droppable",n={target:".droppable-target",deviation:5,sensorOffsetX:0,sensorOffsetY:0},o=0,a=function(t,e){var i=this;i.id=o++,i.$=M(t),i.options=M.extend({},n,i.$.data(),e),i.init()};a.DEFAULTS=n,a.NAME=O,a.prototype.trigger=function(t,e){return M.zui.callEvent(this.options[t],e,this)},a.prototype.init=function(){var r,l,d,c,p,h,n,u,f,g,m,v,o,y=this,a=y.$,b=y.options,w=b.deviation,s="."+O+"."+y.id,C="mousedown"+s,$="mouseup"+s,x="mousemove"+s,T=b.selector,k=b.handle,D=b.flex,t=b.container,S=b.canMoveHere,E=a,z=!1,P=t?M(b.container).first():T?a:M("body"),I=function(t){if(z&&(m={left:t.pageX,top:t.pageY},!(L.abs(m.left-u.left)<w&&L.abs(m.top-u.top)<w))){if(null===d){var e=P.css("position");"absolute"!=e&&"relative"!=e&&"fixed"!=e&&(h=e,P.css("position","relative")),d=E.clone().removeClass("drag-from").addClass("drag-shadow").css({position:"absolute",width:E.outerWidth(),transition:"none"}).appendTo(P),E.addClass("dragging"),y.trigger("start",{event:t,element:E})}var i={left:m.left-g.left,top:m.top-g.top},n={left:i.left-f.left,top:i.top-f.top};d.css(n),M.extend(v,m);var o=!1;c=!1,D||r.removeClass("drop-to");var s=null;if(r.each(function(){var t=M(this),e=t.offset(),i=t.outerWidth(),n=t.outerHeight(),o=e.left+b.sensorOffsetX,a=e.top+b.sensorOffsetY;if(m.left>o&&m.top>a&&m.left<o+i&&m.top<a+n&&(s&&s.removeClass("drop-to"),s=t,!b.nested))return!1}),s){c=!0;var a=s.data("id");E.data("id")!=a&&(p=!1),(null===l||l.data("id")!==a&&!p)&&(o=!0),l=s,D&&r.removeClass("drop-to"),l.addClass("drop-to")}D?null!==l&&l.length&&(c=!0):(E.toggleClass("drop-in",c),d.toggleClass("drop-in",c)),S&&!1===S(E,l)||y.trigger("drag",{event:t,isIn:c,target:l,element:E,isNew:o,selfTarget:p,clickOffset:g,offset:i,position:{left:i.left-f.left,top:i.top-f.top},mouseOffset:m}),t.preventDefault()}},_=function(t){if(M(j).off(s),clearTimeout(o),z){if(z=!1,h&&P.css("position",h),null===d)return E.removeClass("drag-from"),void y.trigger("always",{event:t,cancel:!0});c||(l=null);var e={left:(m=t?{left:t.pageX,top:t.pageY}:v).left-g.left,top:m.top-g.top},i={left:m.left-v.left,top:m.top-v.top};v.left=m.left,v.top=m.top;var n={event:t,isIn:c,target:l,element:E,isNew:!p&&null!==l,selfTarget:p,offset:e,mouseOffset:m,position:{left:e.left-f.left,top:e.top-f.top},lastMouseOffset:v,moveOffset:i};y.trigger("beforeDrop",n)&&c&&y.trigger("drop",n),r.removeClass("drop-to"),E.removeClass("dragging").removeClass("drag-from"),d.remove(),d=null,y.trigger("finish",n),y.trigger("always",n),t&&t.preventDefault()}},e=function(t){var e=M.zui.getMouseButtonCode(b.mouseButton);if(!(-1<e&&t.button!==e)){var i=M(this);T&&(E=k?i.closest(T):i),E.hasClass("drag-shadow")||b.before&&!1===b.before({event:t,element:E})||(z=!0,r=M.isFunction(b.target)?b.target(a):P.find(b.target),p=!(c=!1),h=d=l=null,n=E.offset(),f=P.offset(),u={left:t.pageX,top:t.pageY},v=M.extend({},u),g={left:u.left-n.left,top:u.top-n.top},E.addClass("drag-from"),M(j).on(x,I).on($,_),o=setTimeout(function(){M(j).on(C,_)},10),t.preventDefault())}};k?a.on(C,k,e):T?a.on(C,T,e):a.on(C,e)},a.prototype.destroy=function(){var t="."+O+"."+this.id;this.$.off(t),M(j).off(t),this.$.data(O,null)},a.prototype.reset=function(){this.destroy(),this.init()},M.fn.droppable=function(n){return this.each(function(){var t=M(this),e=t.data(O),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data(O,e=new a(this,i)),"string"==typeof n&&e[n]()})},M.fn.droppable.Constructor=a}(jQuery,document,Math),function(r){function a(n,o,a){return this.each(function(){var t=r(this),e=t.data(l),i=r.extend({},s.DEFAULTS,t.data(),"object"==(void 0===n?"undefined":_typeof(n))&&n);e||t.data(l,e=new s(this,i)),"string"==typeof n?e[n](o,a):i.show&&e.show(o,a)})}var l="zui.modal",s=function(t,e){var i=this;i.options=e,i.$body=r(document.body),i.$element=r(t),i.$backdrop=i.isShown=null,void(i.scrollbarWidth=0)===e.moveable&&(i.options.moveable=i.$element.hasClass("modal-moveable")),e.remote&&i.$element.find(".modal-content").load(e.remote,function(){i.$element.trigger("loaded."+l)})};s.VERSION="3.2.0",s.TRANSITION_DURATION=300,s.BACKDROP_TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0,position:"fit"};var d=function(t,e){var i=r(window);e.left=Math.max(0,Math.min(e.left,i.width()-t.outerWidth())),e.top=Math.max(0,Math.min(e.top,i.height()-t.outerHeight())),t.css(e)};s.prototype.toggle=function(t,e){return this.isShown?this.hide():this.show(t,e)},s.prototype.ajustPosition=function(t){var e=this.options;if(void 0===t&&(t=e.position),void 0!==t){var i=this.$element.find(".modal-dialog"),n=Math.max(0,(r(window).height()-i.outerHeight())/2),o="fit"==t?2*n/3:"center"==t?n:t;if(i.hasClass("modal-moveable")){var a=null,s=e.rememberPos;s&&(!0===s?a=this.$element.data("modal-pos"):r.zui.store&&(a=r.zui.store.pageGet(l+".rememberPos."+s))),a||(a={left:Math.max(0,(r(window).width()-i.outerWidth())/2),top:o}),"inside"===e.moveable?d(i,a):i.css(a)}else i.css("margin-top",o)}},s.prototype.setMoveale=function(){r.fn.draggable||console.error("Moveable modal requires draggable.js.");var i=this,n=i.options,e=i.$element.find(".modal-dialog").removeClass("modal-dragged");e.toggleClass("modal-moveable",!!n.moveable),i.$element.data("modal-moveable-setup")||e.draggable({container:i.$element,handle:".modal-header",before:function(){e.css("margin-top","").addClass("modal-dragged")},finish:function(t){var e=n.rememberPos;e&&(i.$element.data("modal-pos",t.pos),r.zui.store&&!0!==e&&r.zui.store.pageSet(l+".rememberPos."+e,t.pos))},move:"inside"!==n.moveable||function(t){d(e,t)}})},s.prototype.show=function(i,n){var o=this,t=r.Event("show."+l,{relatedTarget:i});o.$element.trigger(t),o.isShown||t.isDefaultPrevented()||(o.isShown=!0,o.options.moveable&&o.setMoveale(),o.checkScrollbar(),o.$body.addClass("modal-open"),o.setScrollbar(),o.escape(),o.$element.on("click.dismiss."+l,'[data-dismiss="modal"]',r.proxy(o.hide,o)),o.backdrop(function(){var t=r.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),t&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.ajustPosition(n),o.enforceFocus();var e=r.Event("shown."+l,{relatedTarget:i});t?o.$element.find(".modal-dialog").one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(s.TRANSITION_DURATION):o.$element.trigger("focus").trigger(e)}))},s.prototype.hide=function(t){t&&t.preventDefault(),t=r.Event("hide."+l),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),r(document).off("focusin."+l),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss."+l),r.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",r.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):this.hideModal())},s.prototype.enforceFocus=function(){r(document).off("focusin."+l).on("focusin."+l,r.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?r(document).on("keydown.dismiss."+l,r.proxy(function(t){if(27==t.which){var e=r.Event("escaping."+l),i=this.$element.triggerHandler(e,"esc");if(null!=i&&!i)return;this.hide()}},this)):this.isShown||r(document).off("keydown.dismiss."+l)},s.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden."+l)})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(t){var e=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=r.support.transition&&i;if(this.$backdrop=r('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("mousedown.dismiss."+l,r.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){e.removeBackdrop(),t&&t()};r.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},s.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},s.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},s.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},s.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=r.fn.modal;r.fn.modal=a,r.fn.modal.Constructor=s,r.fn.modal.noConflict=function(){return r.fn.modal=t,this},r(document).on("click."+l+".data-api",'[data-toggle="modal"]',function(t){var e=r(this),i=e.attr("href"),n=null;try{n=r(e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""))}catch(t){return}if(n.length){var o=n.data(l)?"toggle":r.extend({remote:!/#/.test(i)&&i},n.data(),e.data());e.is("a")&&t.preventDefault(),n.one("show."+l,function(t){t.isDefaultPrevented()||n.one("hidden."+l,function(){e.is(":visible")&&e.trigger("focus")})}),a.call(n,o,this,e.data("position"))}})}(jQuery),function(g,m){if(!g.fn.modal)throw new Error("Modal trigger requires modal.js");var v="zui.modaltrigger",y="ajax",a=".zui.modal",b="string",s=function t(e,i){e=g.extend({},t.DEFAULTS,g.ModalTriggerDefaults,i?i.data():null,e),this.isShown,this.$trigger=i,this.options=e,this.id=g.zui.uuid()};s.DEFAULTS={type:"custom",height:"auto",name:"triggerModal",fade:!0,position:"fit",showHeader:!0,delay:0,backdrop:!0,keyboard:!0,waittime:0,loadingIcon:"icon-spinner-indicator"},s.prototype.init=function(n){var t=this;if(n.url&&(!n.type||n.type!=y&&"iframe"!=n.type)&&(n.type=y),n.remote)n.type=y,_typeof(n.remote)===b&&(n.url=n.remote);else if(n.iframe)n.type="iframe",_typeof(n.iframe)===b&&(n.url=n.iframe);else if(n.custom&&(n.type="custom",_typeof(n.custom)===b)){var e;try{e=g(n.custom)}catch(t){}e&&e.length?n.custom=e:g.isFunction(m[n.custom])&&(n.custom=m[n.custom])}var o=g("#"+n.name);o.length&&(t.isShown||o.off(a),o.remove()),o=g('<div id="'+n.name+'" class="modal modal-trigger '+(n.className||"")+'">'+("string"==typeof n.loadingIcon&&0===n.loadingIcon.indexOf("icon-")?'<div class="icon icon-spin loader '+n.loadingIcon+'"></div>':n.loadingIcon)+'<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button class="close" data-dismiss="modal">×</button><h4 class="modal-title"><i class="modal-icon"></i> <span class="modal-title-name"></span></h4></div><div class="modal-body"></div></div></div></div>').appendTo("body").data(v,t);var i=function(t,e){var i=n[t];g.isFunction(i)&&o.on(e+a,i)};i("onShow","show"),i("shown","shown"),i("onHide","hide"),i("hidden","hidden"),i("loaded","loaded"),o.on("shown"+a,function(){t.isShown=!0}).on("hidden"+a,function(){t.isShown=!1}),this.$modal=o,this.$dialog=o.find(".modal-dialog"),n.mergeOptions&&(this.options=n)},s.prototype.show=function(t){var n=g.extend({},this.options,{url:this.$trigger?this.$trigger.attr("href")||this.$trigger.attr("data-url")||this.$trigger.data("url"):this.options.url},t);this.init(n);var o=this,a=this.$modal,i=this.$dialog,e=n.custom,s=i.find(".modal-body").css("padding",""),r=i.find(".modal-header"),l=i.find(".modal-content");a.toggleClass("fade",n.fade).addClass(n.className).toggleClass("modal-loading",!this.isShown),i.toggleClass("modal-md","md"===n.size).toggleClass("modal-sm","sm"===n.size).toggleClass("modal-lg","lg"===n.size).toggleClass("modal-fullscreen","fullscreen"===n.size),r.toggle(n.showHeader),r.find(".modal-icon").attr("class","modal-icon icon-"+n.icon),r.find(".modal-title-name").text(n.title||""),n.size&&"fullscreen"===n.size&&(n.width="",n.height="");var d=function(){clearTimeout(this.resizeTask),this.resizeTask=setTimeout(function(){o.ajustPosition()},100)},c=function(t,e){return void 0===t&&(t=n.delay),setTimeout(function(){i=a.find(".modal-dialog"),n.width&&"auto"!=n.width&&i.css("width",n.width),n.height&&"auto"!=n.height&&(i.css("height",n.height),"iframe"===n.type&&s.css("height",i.height()-r.outerHeight())),o.ajustPosition(n.position),a.removeClass("modal-loading"),"iframe"!=n.type&&i.off("resize."+v).on("resize."+v,d),e&&e()},t)};if("custom"===n.type&&e)if(g.isFunction(e)){var p=e({modal:a,options:n,modalTrigger:o,ready:c});(void 0===p?"undefined":_typeof(p))===b&&(s.html(p),c())}else e instanceof g?s.html(g("<div>").append(e.clone()).html()):s.html(e),c();else if(n.url){var h=function(){var t=a.callComEvent(o,"broken");t&&(s.html(t),c())};if(a.attr("ref",n.url),"iframe"===n.type){a.addClass("modal-iframe"),this.firstLoad=!0;var u="iframe-"+n.name;r.detach(),s.detach(),l.empty().append(r).append(s),s.css("padding",0).html('<iframe id="'+u+'" name="'+u+'" src="'+n.url+'" frameborder="no"  allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"  allowtransparency="true" scrolling="auto" style="width: 100%; height: 100%; left: 0px;"></iframe>'),0<n.waittime&&(o.waitTimeout=c(n.waittime,h));var f=document.getElementById(u);f.onload=f.onreadystatechange=function(){if(o.firstLoad&&a.addClass("modal-loading"),!this.readyState||"complete"==this.readyState){o.firstLoad=!1,0<n.waittime&&clearTimeout(o.waitTimeout);try{a.attr("ref",f.contentWindow.location.href);var t=m.frames[u].$;if(t&&"auto"===n.height&&"fullscreen"!=n.size){var i=t("body").addClass("body-modal");n.iframeBodyClass&&i.addClass(n.iframeBodyClass);a.callComEvent(o,"loaded",{modalType:"iframe",jQuery:t}),setTimeout(function(t){a.removeClass("fade");var e=i.outerHeight();!0===t&&n.onlyIncreaseHeight&&(e=Math.max(e,s.data("minModalHeight")||0),s.data("minModalHeight",e)),s.css("height",e),n.fade&&a.addClass("fade"),c()},100),i.off("resize."+v).on("resize."+v,d)}else c();t.extend({closeModal:m.closeModal})}catch(t){c()}}}}else g.ajax(g.extend({url:n.url,success:function(e){try{var t=g(e);t.hasClass("modal-dialog")?i.replaceWith(t):t.hasClass("modal-content")?i.find(".modal-content").replaceWith(t):s.wrapInner(t)}catch(t){a.html(e)}a.callComEvent(o,"loaded",{modalType:y}),c()},error:h},n.ajaxOptions))}a.modal({show:"show",backdrop:n.backdrop,moveable:n.moveable,rememberPos:n.rememberPos,keyboard:n.keyboard})},s.prototype.close=function(t,e){(t||e)&&this.$modal.on("hidden"+a,function(){g.isFunction(t)&&t(),(void 0===e?"undefined":_typeof(e))===b&&("this"===e?m.location.reload():m.location=e)}),this.$modal.modal("hide")},s.prototype.toggle=function(t){this.isShown?this.close():this.show(t)},s.prototype.ajustPosition=function(t){this.$modal.modal("ajustPosition",t||this.options.position)},g.zui({ModalTrigger:s,modalTrigger:new s}),g.fn.modalTrigger=function(t,o){return g(this).each(function(){var e=g(this),i=e.data(v),n=g.extend({title:e.attr("title")||e.text(),url:e.attr("href"),type:e.hasClass("iframe")?"iframe":""},e.data(),g.isPlainObject(t)&&t);i||e.data(v,i=new s(n,e)),(void 0===t?"undefined":_typeof(t))==b?i[t](o):n.show&&i.show(o),e.on((n.trigger||"click")+".toggle."+v,function(t){i.toggle(n),e.is("a")&&t.preventDefault()})})};var n=g.fn.modal;g.fn.modal=function(e,i){return g(this).each(function(){var t=g(this);t.hasClass("modal")?n.call(t,e,i):t.modalTrigger(e,i)})};var o=function(t){var e=void 0===t?"undefined":_typeof(t);return"undefined"===e?t=g(".modal.modal-trigger"):e===b&&(t=g(t)),t&&t instanceof g?t:null};g.zui({closeModal:function(t,e,i){if(g.isFunction(t)){var n=i;i=e,e=t,t=n}(t=o(t))&&t.length&&t.each(function(){g(this).data(v).close(e,i)})},ajustModalPosition:function(t,e){(e=o(e))&&e.length&&e.modal("ajustPosition",t)}}),g(document).on("click."+v+".data-api",'[data-toggle="modal"]',function(t){var e=g(this),i=e.attr("href"),n=null;try{n=g(e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""))}catch(t){}n&&n.length||(e.data(v)?e.trigger(".toggle."+v):e.modalTrigger({show:!0})),e.is("a")&&t.preventDefault()})}(window.jQuery,window),function(y){var a=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};a.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.prototype.init=function(t,e,i){this.enabled=!0,this.type=t,this.$element=y(e),this.options=this.getOptions(i);for(var n=this.options.trigger.split(" "),o=n.length;o--;){var a=n[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,y.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focus",r="hover"==a?"mouseleave":"blur";this.$element.on(s+"."+this.type,this.options.selector,y.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,y.proxy(this.leave,this))}}this.options.selector?this._options=y.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},a.prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.getOptions=function(t){return(t=y.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},a.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&y.each(this._options,function(t,e){n[t]!=e&&(i[t]=e)}),i},a.prototype.enter=function(t){var e=t instanceof this.constructor?t:y(t.currentTarget)[this.type](this.getDelegateOptions()).data("zui."+this.type);return clearTimeout(e.timeout),e.hoverState="in",e.options.delay&&e.options.delay.show?void(e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)):e.show()},a.prototype.leave=function(t){var e=t instanceof this.constructor?t:y(t.currentTarget)[this.type](this.getDelegateOptions()).data("zui."+this.type);return clearTimeout(e.timeout),e.hoverState="out",e.options.delay&&e.options.delay.hide?void(e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)):e.hide()},a.prototype.show=function(t){var e=y.Event("show.zui."+this.type);if((t||this.hasContent())&&this.enabled){var i=this;if(i.$element.trigger(e),e.isDefaultPrevented())return;var n=i.tip();i.setContent(t),i.options.animation&&n.addClass("fade");var o="function"==typeof i.options.placement?i.options.placement.call(i,n[0],i.$element[0]):i.options.placement,a=/\s?auto?\s?/i,s=a.test(o);s&&(o=o.replace(a,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(o),i.options.container?n.appendTo(i.options.container):n.insertAfter(i.$element);var r=i.getPosition(),l=n[0].offsetWidth,d=n[0].offsetHeight;if(s){var c=i.$element.parent(),p=o,h=document.documentElement.scrollTop||document.body.scrollTop,u="body"==i.options.container?window.innerWidth:c.outerWidth(),f="body"==i.options.container?window.innerHeight:c.outerHeight(),g="body"==i.options.container?0:c.offset().left;o="bottom"==o&&r.top+r.height+d-h>f?"top":"top"==o&&r.top-h-d<0?"bottom":"right"==o&&r.right+l>u?"left":"left"==o&&r.left-l<g?"right":o,n.removeClass(p).addClass(o)}var m=i.getCalculatedOffset(o,r,l,d);i.applyPlacement(m,o);var v=function(){var t=i.hoverState;i.$element.trigger("shown.zui."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};y.support.transition&&i.$tip.hasClass("fade")?n.one("bsTransitionEnd",v).emulateTransitionEnd(150):v()}},a.prototype.applyPlacement=function(t,e){var i,n=this.tip(),o=n[0].offsetWidth,a=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(r)&&(r=0),t.top=t.top+s,t.left=t.left+r,n.offset(t).addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;if("top"==e&&d!=a&&(i=!0,t.top=t.top+a-d),/bottom|top/.test(e)){var c=0;t.left<0&&(c=-2*t.left,t.left=0,n.offset(t),l=n[0].offsetWidth,d=n[0].offsetHeight),this.replaceArrow(c-o+l,l,"left")}else this.replaceArrow(d-a,d,"top");i&&n.offset(t)},a.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},a.prototype.setContent=function(t){var e=this.tip(),i=t||this.getTitle();this.options.tipId&&e.attr("id",this.options.tipId),this.options.tipClass&&e.addClass(this.options.tipClass),e.find(".tooltip-inner")[this.options.html?"html":"text"](i),e.removeClass("fade in top bottom left right")},a.prototype.hide=function(){function t(){"in"!=e.hoverState&&i.detach()}var e=this,i=this.tip(),n=y.Event("hide.zui."+this.type);if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),y.support.transition&&this.$tip.hasClass("fade")?i.one(y.support.transition.end,t).emulateTransitionEnd(150):t(),this.$element.trigger("hidden.zui."+this.type),this},a.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},a.prototype.hasContent=function(){return this.getTitle()},a.prototype.getPosition=function(){var t=this.$element[0];return y.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},a.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},a.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},a.prototype.tip=function(){return this.$tip=this.$tip||y(this.options.template)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},a.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},a.prototype.enable=function(){this.enabled=!0},a.prototype.disable=function(){this.enabled=!1},a.prototype.toggleEnabled=function(){this.enabled=!this.enabled},a.prototype.toggle=function(t){var e=t?y(t.currentTarget)[this.type](this.getDelegateOptions()).data("zui."+this.type):this;e.tip().hasClass("in")?e.leave(e):e.enter(e)},a.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("zui."+this.type)};var t=y.fn.tooltip;y.fn.tooltip=function(n,o){return this.each(function(){var t=y(this),e=t.data("zui.tooltip"),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data("zui.tooltip",e=new a(this,i)),"string"==typeof n&&e[n](o)})},y.fn.tooltip.Constructor=a,y.fn.tooltip.noConflict=function(){return y.fn.tooltip=t,this}}(window.jQuery),function(o){var a=function(t,e){this.init("popover",t,e)};if(!o.fn.tooltip)throw new Error("Popover requires tooltip.js");a.DEFAULTS=o.extend({},o.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((a.prototype=o.extend({},o.fn.tooltip.Constructor.prototype)).constructor=a).prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.setContent=function(){var t=this.tip(),e=this.getTarget();if(e)return e.find(".arrow").length<1&&t.addClass("no-arrow"),void t.html(e.html());var i=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](i),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),this.options.tipId&&t.attr("id",this.options.tipId),this.options.tipClass&&t.addClass(this.options.tipClass),t.find(".popover-title").html()||t.find(".popover-title").hide()},a.prototype.hasContent=function(){return this.getTarget()||this.getTitle()||this.getContent()},a.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},a.prototype.getTarget=function(){var t=this.$element,e=this.options,i=t.attr("data-target")||("function"==typeof e.target?e.target.call(t[0]):e.target);return!!i&&("$next"==i?t.next(".popover"):o(i))},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},a.prototype.tip=function(){return this.$tip||(this.$tip=o(this.options.template)),this.$tip};var t=o.fn.popover;o.fn.popover=function(n){return this.each(function(){var t=o(this),e=t.data("zui.popover"),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data("zui.popover",e=new a(this,i)),"string"==typeof n&&e[n]()})},o.fn.popover.Constructor=a,o.fn.popover.noConflict=function(){return o.fn.popover=t,this}}(window.jQuery),function(s){function o(){s(".dropdown-backdrop").remove(),s(l).each(function(t){var e=r(s(this));e.hasClass("open")&&(e.trigger(t=s.Event("hide."+a)),t.isDefaultPrevented()||e.removeClass("open").trigger("hidden."+a))})}function r(t){var e,i=t.attr("data-target");i||(i=(i=t.attr("href"))&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));try{e=i&&s(i)}catch(t){}return e&&e.length?e:t.parent()}var a="zui.dropdown",l="[data-toggle=dropdown]",n=function(t){s(t).on("click."+a,this.toggle)};n.prototype.toggle=function(t){var e=s(this);if(!e.is(".disabled, :disabled")){var i=r(e),n=i.hasClass("open");if(o(),!n){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&s('<div class="dropdown-backdrop"/>').insertAfter(s(this)).on("click",o),i.trigger(t=s.Event("show."+a)),t.isDefaultPrevented())return;i.toggleClass("open").trigger("shown."+a),e.focus()}return!1}},n.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var e=s(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=r(e),n=i.hasClass("open");if(!n||n&&27==t.keyCode)return 27==t.which&&i.find(l).focus(),e.click();var o=s("[role=menu] li:not(.divider):visible a",i);if(o.length){var a=o.index(o.filter(":focus"));38==t.keyCode&&0<a&&a--,40==t.keyCode&&a<o.length-1&&a++,~a||(a=0),o.eq(a).focus()}}}};var t=s.fn.dropdown;s.fn.dropdown=function(i){return this.each(function(){var t=s(this),e=t.data("dropdown");e||t.data("dropdown",e=new n(this)),"string"==typeof i&&e[i].call(t)})},s.fn.dropdown.Constructor=n,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=t,this};var e=a+".data-api";s(document).on("click."+e,o).on("click."+e,".dropdown form",function(t){t.stopPropagation()}).on("click."+e,l,n.prototype.toggle).on("keydown."+e,l+", [role=menu]",n.prototype.keydown)}(window.jQuery),function(u,f){var g="zui.contextmenu",m={duration:200},v=!1,y={},b="zui-contextmenu-"+u.zui.uuid(),w=0,C=0,$=function(t,e){if("string"==typeof t&&(t="seperator"===t||"divider"===t||"-"===t||"|"===t?{type:"seperator"}:{label:t,id:e}),"seperator"===t.type||"divider"===t.type)return u('<li class="divider"></li>');var i=u("<a/>").attr({href:t.url||"###",class:t.className,style:t.style}).data("item",t);return t.html?i.html(!0===t.html?t.label||t.text:t.html):i.text(t.label||t.text),t.onClick&&i.on("click",t.onClick),u("<li />").toggleClass("disabled",!0===t.disabled).append(i)},x=null,T=function(t,e){"function"==typeof t&&(e=t,t=null),x&&(clearTimeout(x),x=null);var i=u("#"+b);if(i.length){var n=i.data("options");if(!t||n.id===t){var o=function(){i.hide(),n.onHidden&&n.onHidden(),e&&e()};n.onHide&&n.onHide();var a=n.animation;i.removeClass("in"),a?x=setTimeout(o,n.duration):o()}}return y};u(document).on("click",function(t){v||u(t.target).closest(".contextmenu").length||T()}),u.extend(y,{NAME:g,DEFAULTS:m,show:function(t,i,e){u.isPlainObject(t)&&(e=i,t=(i=t).items),v=!0;var n=(i=u.extend({},m,i)).x,o=i.y;n===f&&(n=(i.event||i).clientX),n===f&&(n=w),o===f&&(o=(i.event||i).clientY),o===f&&(o=C);var a=u("#"+b);a.length||(a=u('<div style="display: none; position: fixed; z-index: 2000;" class="contextmenu" id="'+b+'"><ul class="dropdown-menu contextmenu-menu"></ul></div>').appendTo("body"));var s=a.find(".contextmenu-menu").off("click."+g).on("click."+g,"a",function(t){var e=u(this);!1!==(i.onClickItem&&i.onClickItem(e.data("item"),e,t))&&T()}).empty();a.hide().attr("class","contextmenu");var r=i.itemCreator||$,l=void 0===t?"undefined":_typeof(t);"string"===l?t=t.split(","):"function"===l&&(t=t(i)),u.each(t,function(t,e){s.append(r(e,t,i))});var d=i.animation,c=i.duration;!0===d&&(i.animation=d="fade"),x&&(clearTimeout(x),x=null);var p=function(){a.addClass("in"),i.onShown&&i.onShown(),e&&e()};i.onShow&&i.onShow(),a.data("options",{animation:d,onHide:i.onHide,onHidden:i.onHidden,id:i.id,duration:c});var h=u(window);return n=Math.max(0,Math.min(n,h.width()-s.outerWidth())),o=Math.max(0,Math.min(o,h.height()-s.outerHeight())),a.css({left:n,top:o}),d?(a.addClass("open").addClass(d).show(),x=setTimeout(function(){p(),v=!1},i.duration)):(a.addClass("open").show(),p(),x=setTimeout(function(){v=!1},200)),y},hide:T,listenMouse:function(){return u(document).off("mousemove."+g).on("mousemove."+g,function(t){w=t.clientX,C=t.clientY}),y}}),u.zui({ContextMenu:y});var o=function(t,i){var n=this;n.name=g,n.$=u(t);var e=(i=n.options=u.extend({trigger:"contextmenu"},y.DEFAULTS,this.$.data(),i)).trigger;n.id=u.zui.uuid();var o=function(t){if("mousedown"!==t.type||2===t.button){var e={x:t.clientX,y:t.clientY,event:t};return i.itemsCreator&&(e.items=i.itemsCreator.call(this,t)),n.show(e),t.preventDefault(),t.returnValue=!1}},a=e+"."+g;i.selector?n.$.on(a,i.selector,o):n.$.on(a,o)};o.prototype.destory=function(){that.$.off("."+g)},o.prototype.hide=function(t){y.hide(this.id,t)},o.prototype.show=function(t,e){t=u.extend({},this.options,t),y.show(t,e)},u.fn.contextmenu=function(n){return this.each(function(){var t=u(this),e=t.data(g),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data(g,e=new o(this,i)),"string"==typeof n&&e[n]()})},u.fn.contextmenu.Constructor=o}(jQuery,void 0),function(d){var a=function(t,e){this.$element=d(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",d.proxy(this.pause,this)).on("mouseleave",d.proxy(this.cycle,this))};a.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,touchable:!0},a.prototype.touchable=function(){if(this.options.touchable){this.$element.on("touchstart touchmove touchend",function(t){var e;switch((t=t||window.event).originalEvent&&(t=t.originalEvent),d(this),t.type){case"touchstart":a=t.touches[0].pageX,s=t.touches[0].pageY;break;case"touchend":var i=t.changedTouches[0].pageX-a,n=t.changedTouches[0].pageY-s;if(Math.abs(i)>Math.abs(n))10<(e=i)?r.prev():e<-10&&r.next(),10<Math.abs(i)&&t.preventDefault();else{var o=d(window);d("body,html").animate({scrollTop:o.scrollTop()-n},400)}}});var a,s,r=this}},a.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},a.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},a.prototype.to=function(t){var e=this,i=this.getActiveIndex();if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",d(this.$items[t]))},a.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition.end&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},a.prototype.next=function(){if(!this.sliding)return this.slide("next")},a.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},a.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),n=e||i[t](),o=this.interval,a="next"==t?"left":"right",s="next"==t?"first":"last",r=this;if(!n.length){if(!this.options.wrap)return;n=this.$element.find(".item")[s]()}this.sliding=!0,o&&this.pause();var l=d.Event("slide.zui.carousel",{relatedTarget:n[0],direction:a});if(!n.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=d(r.$indicators.children()[r.getActiveIndex()]);t&&t.addClass("active")})),d.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(l),l.isDefaultPrevented())return;n.addClass(t),n[0].offsetWidth,i.addClass(a),n.addClass(a),i.one(d.support.transition.end,function(){n.removeClass([t,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),r.sliding=!1,setTimeout(function(){r.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(l),l.isDefaultPrevented())return;i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}};var t=d.fn.carousel;d.fn.carousel=function(o){return this.each(function(){var t=d(this),e=t.data("zui.carousel"),i=d.extend({},a.DEFAULTS,t.data(),"object"==(void 0===o?"undefined":_typeof(o))&&o),n="string"==typeof o?o:i.slide;e||t.data("zui.carousel",e=new a(this,i)),"number"==typeof o?e.to(o):n?e[n]():i.interval&&e.pause().cycle(),i.touchable&&e.touchable()})},d.fn.carousel.Constructor=a,d.fn.carousel.noConflict=function(){return d.fn.carousel=t,this},d(document).on("click.zui.carousel.data-api","[data-slide], [data-slide-to]",function(t){var e,i=d(this),n=d(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")),o=d.extend({},n.data(),i.data()),a=i.attr("data-slide-to");a&&(o.interval=!1),n.carousel(o),(a=i.attr("data-slide-to"))&&n.data("zui.carousel").to(a),t.preventDefault()}),d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var t=d(this);t.carousel(t.data())})})}(window.jQuery),function(t){var c,p,h,e;jQuery.zui.imgReady=(c=[],p=null,h=function(){for(var t=0;t<c.length;t++)c[t].end?c.splice(t--,1):c[t]();!c.length&&e()},e=function(){clearInterval(p),p=null},function(t,e,i,n){var o,a,s,r,l,d=new Image;return d.src=t,d.complete?(e.call(d),void(i&&i.call(d))):(a=d.width,s=d.height,d.onerror=function(){n&&n.call(d),o.end=!0,d=d.onload=d.onerror=null},(o=function(){r=d.width,l=d.height,(r!==a||l!==s||1024<r*l)&&(e.call(d),o.end=!0)})(),d.onload=function(){!o.end&&o(),i&&i.call(d),d=d.onload=d.onerror=null},void(o.end||(c.push(o),null===p&&(p=setInterval(h,40)))))})}(),function(c,p,h){if(!c.fn.modalTrigger)throw new Error("modal & modalTrigger requires for lightbox");if(!c.zui.imgReady)throw new Error("imgReady requires for lightbox");var a=function(t,e){this.$=c(t),this.options=this.getOptions(e),this.init()};a.DEFAULTS={modalTeamplate:'<div class="icon-spinner icon-spin loader"></div><div class="modal-dialog"><button class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button><button class="controller prev"><i class="icon icon-chevron-left"></i></button><button class="controller next"><i class="icon icon-chevron-right"></i></button><img class="lightbox-img" src="{image}" alt="" data-dismiss="modal" /><div class="caption"><div class="content">{caption}<div></div></div>'},a.prototype.getOptions=function(t){var e="image";return(t=c.extend({},a.DEFAULTS,this.$.data(),t))[e]||(t[e]=this.$.attr("src")||this.$.attr("href")||this.$.find("img").attr("src"),this.$.data(e,t[e])),t},a.prototype.init=function(){this.bindEvents()},a.prototype.initGroups=function(){var t=this.$.data("groups");t||(t=c('[data-toggle="lightbox"][data-group="'+this.options.group+'"], [data-lightbox-group="'+this.options.group+'"]'),this.$.data("groups",t),t.each(function(t){c(this).attr("data-group-index",t)})),this.groups=t,this.groupIndex=parseInt(this.$.data("group-index"))},a.prototype.setImage=function(t,e){void 0!==t&&(this.options.image=t),void 0!==e&&(this.options.caption=e)},a.prototype.show=function(t,e){this.setImage(t,e),this.$.triggerHandler("click")},a.prototype.bindEvents=function(){var t=this.$,e=this,i=this.options;return!!i.image&&void t.modalTrigger({type:"custom",name:"lightboxModal",position:"center",custom:function(a){e.initGroups();var s=a.modal,r=e.groups,t=e.groupIndex;s.addClass("modal-lightbox").html(i.modalTeamplate.format(i)).toggleClass("lightbox-with-caption","string"==typeof i.caption).removeClass("lightbox-full").data("group-index",t);var l=s.find(".modal-dialog"),d=c(p).width();c.zui.imgReady(i.image,function(){l.css({width:h.min(d,this.width)}),d<this.width+30&&s.addClass("lightbox-full"),a.ready(200)}),s.find(".prev").toggleClass("show",0<r.filter('[data-group-index="'+(t-1)+'"]').length),s.find(".next").toggleClass("show",0<r.filter('[data-group-index="'+(t+1)+'"]').length),s.find(".controller").click(function(){var t=c(this),e=s.data("group-index")+(t.hasClass("prev")?-1:1),i=r.filter('[data-group-index="'+e+'"]');if(i.length){var n=i.data("image"),o=i.data("caption");s.addClass("modal-loading").data("group-index",e).toggleClass("lightbox-with-caption","string"==typeof o).removeClass("lightbox-full"),s.find(".lightbox-img").attr("src",n),s.find(".caption > .content").text(o),d=c(p).width(),c.zui.imgReady(n,function(){l.css({width:h.min(d,this.width)}),d<this.width+30&&s.addClass("lightbox-full"),a.ready()})}return s.find(".prev").toggleClass("show",0<r.filter('[data-group-index="'+(e-1)+'"]').length),s.find(".next").toggleClass("show",0<r.filter('[data-group-index="'+(e+1)+'"]').length),!1})}})},c.fn.lightbox=function(n){var o="group"+(new Date).getTime();return this.each(function(){var t=c(this),e="object"==(void 0===n?"undefined":_typeof(n))&&n;"object"==(void 0===e?"undefined":_typeof(e))&&e.group?t.attr("data-lightbox-group",e.group):t.data("group")?t.attr("data-lightbox-group",t.data("group")):t.attr("data-lightbox-group",o),t.data("group",t.data("lightbox-group"));var i=t.data("zui.lightbox");i||t.data("zui.lightbox",i=new a(this,e)),"string"==typeof n&&i[n]()})},c.fn.lightbox.Constructor=a,c(function(){c('[data-toggle="lightbox"]').lightbox()})}(jQuery,window,Math),function(d,c,p){var l=0,h={type:"default",placement:"top",time:4e3,parent:"body",icon:null,close:!0,fade:!0,scale:!0},u={},n=function(t,i){d.isPlainObject(t)&&(t=(i=t).message);var n=this;i=n.options=d.extend({},h,i),n.id=i.id||l++;var e=u[n.id];e&&e.destroy(),(u[n.id]=n).message=(i.icon?'<i class="icon-'+i.icon+' icon"></i> ':"")+t,n.$=d('<div class="messager messager-{type} {placement}" style="display: none"><div class="messager-content"></div><div class="messager-actions"></div></div>'.format(i)).toggleClass("fade",i.fade).toggleClass("scale",i.scale).attr("id","messager-"+n.id),i.cssClass&&n.$.addClass(i.cssClass);var o=!1,a=n.$.find(".messager-actions"),s=function(t){var e=d('<button type="button" class="action action-'+t.name+'"/>');"close"===t.name&&e.addClass("close"),t.html!==p&&e.html(t.html),t.icon!==p&&e.append('<i class="action-icon icon-'+t.icon+'"/>'),t.text!==p&&e.append('<span class="action-text">'+t.text+"</span>"),t.tooltip!==p&&e.attr("title",t.tooltip).tooltip(),e.data("action",t),a.append(e)};i.actions&&d.each(i.actions,function(t,e){e.name===p&&(e.name=t),"close"==e.name&&(o=!0),s(e)}),!o&&i.close&&s({name:"close",html:"&times;"}),n.$.on("click",".action",function(t){var e=d(this).data("action");i.onAction&&!1===i.onAction.call(this,e.name,e,n)||d.isFunction(e.action)&&!1===e.action.call(this,n)||(n.hide(),t.stopPropagation())}),n.$.on("click",function(t){i.onAction&&(!0===i.onAction.call(this,"content",null,n)&&n.hide())});var r=n.$.find(".messager-content").html(n.message);i.contentClass&&r.addClass(i.contentClass),n.$.data("zui.messager",n),i.show&&n.message!==p&&n.show()};n.prototype.update=function(t,e){var i=this,n=i.options;i.$.removeClass("messager-"+n.type),e&&(n=d.extend(n,e)),i.$.addClass("messager-"+n.type),t&&(i.message=(n.icon?'<i class="icon-'+n.icon+' icon"></i> ':"")+t,i.$.find(".messager-content").html(i.message))},n.prototype.show=function(t,e){var i=this,n=this.options;if(d.isFunction(t)){var o=e;e=t,o!==p&&(t=o)}if(!i.isShow){i.hiding&&(clearTimeout(i.hiding),i.hiding=null),i.update(t);var a=n.placement,s=d(n.parent),r=s.children(".messagers-holder."+a);if(r.length||(r=d("<div/>").attr("class","messagers-holder "+a).appendTo(s)),r.append(i.$),"center"===a){var l=d(c).height()-r.height();r.css("top",Math.max(-l,l/2))}return i.$.show().addClass("in"),n.time&&(i.hiding=setTimeout(function(){i.hide()},n.time)),i.isShow=!0,e&&e(),i}i.hide(function(){i.show(t,e)})},n.prototype.hide=function(e,t){!0===e&&(t=!0,e=null);var i=this;if(i.$.hasClass("in")){i.$.removeClass("in");var n=function(){var t=i.$.parent();i.$.detach(),t.children().length||t.remove(),e&&e(!0)};t?n():setTimeout(n,200)}else e&&e(!1);i.isShow=!1},n.prototype.destroy=function(){var t=this;t.hide(function(){t.$.remove(),t.$=null},!0),delete u[t.id]},n.all=u;var o=function(){d(".messager").each(function(){var t=d(this).data("zui.messager");t&&t.hide&&t.hide(!0)})},a=function(t,e){"string"==typeof e&&(e={type:e}),(e=d.extend({},e)).id===p&&o();var i=u[e.id]||new n(t,e);return i.show(),i},t={show:a,hide:o};d.each({primary:0,success:"ok-sign",info:"info-sign",warning:"warning-sign",danger:"exclamation-sign",important:0,special:0},function(n,o){t[n]=function(t,e){return a(t,d.extend({type:n,icon:o||null},"string"==typeof(i=e)?{placement:i}:i));var i}}),d.zui({Messager:n,showMessager:a,messager:t})}(jQuery,window,void 0),function(e,c,t,i){function r(t){if((t=t.toLowerCase())&&o.test(t)){var e;if(4===t.length){var i="#";for(e=1;e<4;e+=1)i+=t.slice(e,e+1).concat(t.slice(e,e+1));t=i}var n=[];for(e=1;e<7;e+=2)n.push(a("0x"+t.slice(e,e+2)));return{r:n[0],g:n[1],b:n[2],a:1}}throw new Error("Wrong hex string! (hex: "+t+")")}function l(t){function e(t){return 6*(t=t<0?t+1:1<t?t-1:t)<1?r+(s-r)*t*6:2*t<1?s:3*t<2?r+(s-r)*(2/3-t)*6:r}var i=t.h,n=t.s,o=t.l,a=t.a;i=p(i)%360/360,n=d(p(n)),o=d(p(o)),a=d(p(a));var s=o<=.5?o*(n+1):o+n-o*n,r=2*o-s;return{r:e(i+1/3)*h,g:e(i)*h,b:e(i-1/3)*h,a:a}}function d(t,e){return i=t,n=e,g(o)&&(o=0),g(n)&&(n=h),c.min(c.max(i,o),n);var i,n,o}function p(t){return"number"==typeof t?t:parseFloat(t)}var o=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,h=255,u="object",f={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g=function(t){return void 0===t},m=function(t){return!g(t)},a=function(t){return parseInt(t)},v=function(t){return a(d(p(t),h))},s=function(t,e,i,n){var o=this;if(o.r=o.g=o.b=0,o.a=1,m(n)&&(o.a=d(p(n),1)),m(t)&&m(e)&&m(i))o.r=v(t),o.g=v(e),o.b=v(i);else if(m(t)){var a=void 0===t?"undefined":_typeof(t);if("string"==a)"transparent"===(t=t.toLowerCase())?o.a=0:f[t]?this.rgb(r(f[t])):o.rgb(r(t));else if("number"==a&&g(e))o.r=o.g=o.b=v(t);else if(a==u&&m(t.r))o.r=v(t.r),m(t.g)&&(o.g=v(t.g)),m(t.b)&&(o.b=v(t.b)),m(t.a)&&(o.a=d(p(t.a),1));else if(a==u&&m(t.h)){var s={h:d(p(t.h),360),s:1,l:1,a:1};m(t.s)&&(s.s=d(p(t.s),1)),m(t.l)&&(s.l=d(p(t.l),1)),m(t.a)&&(s.a=d(p(t.a),1)),o.rgb(l(s))}}};s.prototype.rgb=function(t){var e=this;if(m(t)){if((void 0===t?"undefined":_typeof(t))==u)m(t.r)&&(e.r=v(t.r)),m(t.g)&&(e.g=v(t.g)),m(t.b)&&(e.b=v(t.b)),m(t.a)&&(e.a=d(p(t.a),1));else{var i=a(p(t));e.r=i,e.g=i,e.b=i}return e}return{r:e.r,g:e.g,b:e.b,a:e.a}},s.prototype.hue=function(t){var e=this.toHsl();return g(t)?e.h:(e.h=d(p(t),360),this.rgb(l(e)),this)},s.prototype.darken=function(t){var e=this.toHsl();return e.l-=t/100,e.l=d(e.l,1),this.rgb(l(e)),this},s.prototype.clone=function(){return new s(this.r,this.g,this.b,this.a)},s.prototype.lighten=function(t){return this.darken(-t)},s.prototype.fade=function(t){return this.a=d(t/100,1),this},s.prototype.spin=function(t){var e=this.toHsl(),i=(e.h+t)%360;return e.h=i<0?360+i:i,this.rgb(l(e))},s.prototype.toHsl=function(){var t,e,i=this.r/h,n=this.g/h,o=this.b/h,a=this.a,s=c.max(i,n,o),r=c.min(i,n,o),l=(s+r)/2,d=s-r;if(s===r)t=e=0;else{switch(e=.5<l?d/(2-s-r):d/(s+r),s){case i:t=(n-o)/d+(n<o?6:0);break;case n:t=(o-i)/d+2;break;case o:t=(i-n)/d+4}t/=6}return{h:360*t,s:e,l:l,a:a}},s.prototype.luma=function(){var t=this.r/h,e=this.g/h,i=this.b/h;return.2126*(t=t<=.03928?t/12.92:c.pow((t+.055)/1.055,2.4))+.7152*(e=e<=.03928?e/12.92:c.pow((e+.055)/1.055,2.4))+.0722*(i=i<=.03928?i/12.92:c.pow((i+.055)/1.055,2.4))},s.prototype.saturate=function(t){var e=this.toHsl();return e.s+=t/100,e.s=d(e.s),this.rgb(l(e))},s.prototype.desaturate=function(t){return this.saturate(-t)},s.prototype.contrast=function(t,e,i){if(e=g(e)?new s(h,h,h,1):new s(e),(t=g(t)?new s(0,0,0,1):new s(t)).luma()>e.luma()){var n=e;e=t,t=n}return this.a<.5?t:(i=g(i)?.43:p(i),this.luma()<i?e:t)},s.prototype.hexStr=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},s.prototype.toCssStr=function(){var t=this;return 0<t.a?t.a<1?"rgba("+t.r+","+t.g+","+t.b+","+t.a+")":t.hexStr():"transparent"},s.isColor=function(t){return"string"===(void 0===t?"undefined":_typeof(t))&&("transparent"===t.toLowerCase()||f[t.toLowerCase()]||o.test(e.trim(t.toLowerCase())))},s.names=f,s.get=function(t){return new s(t)},e.zui({Color:s})}(jQuery,Math,window),function(d){function c(t,e){return!1===t?t:t?(!0===t?t={add:!0,delete:!0,edit:!0,sort:!0}:"string"==typeof t&&(t=t.split(",")),d.isArray(t)&&(i={},d.each(t,function(t,e){d.isPlainObject(e)?i[e.action]=e:i[e]=!0}),t=i),d.isPlainObject(t)&&(i={},d.each(t,function(t,e){i[t]=!!e&&d.extend({type:t},n[t],d.isPlainObject(e)?e:null)}),t=i),e?d.extend(!0,{},e,t):t):e;var i}function p(t,e,i){return e=e||t.type,d(i||t.template).addClass("tree-action").attr(d.extend({"data-type":e,title:t.title||""},t.attr)).data("action",t)}var a="zui.tree",o=0,s=function(t,e){this.name=a,this.$=d(t),this.getOptions(e),this._init()},n={sort:{template:'<a class="sort-handler" href="javascript:;"><i class="icon icon-move"></i></a>'},add:{template:'<a href="javascript:;"><i class="icon icon-plus"></i></a>'},edit:{template:'<a href="javascript:;"><i class="icon icon-pencil"></i></a>'},delete:{template:'<a href="javascript:;"><i class="icon icon-trash"></i></a>'}};s.DEFAULTS={animate:null,initialState:"normal",toggleTemplate:'<i class="list-toggle icon"></i>'},s.prototype.add=function(t,e,i,n,o){var a,s=d(t),r=this.options;if(s.is("li")?(a=s.children("ul")).length||(a=d("<ul/>"),s.append(a),this._initList(a,s)):a=s,a){var l=this;d.isArray(e)||(e=[e]),d.each(e,function(t,e){var i=d("<li/>").data(e).appendTo(a);void 0!==e.id&&i.attr("data-id",e.id);var n=r.itemWrapper?d(!0===r.itemWrapper?'<div class="tree-item-wrapper"/>':r.itemWrapper).appendTo(i):i;if(e.html)n.html(e.html);else if(d.isFunction(l.options.itemCreator)){var o=l.options.itemCreator(i,e);!0!==o&&!1!==o&&n.html(o)}else e.url?n.append(d("<a/>",{href:e.url}).text(e.title||e.name)):n.append(d("<span/>").text(e.title||e.name));l._initItem(i,e.idx||t,a,e),e.children&&e.children.length&&l.add(i,e.children)}),this._initList(a),i&&!a.hasClass("tree")&&l.expand(a.parent("li"),n,o)}},s.prototype.reload=function(t){var e=this;t&&(e.$.empty(),e.add(e.$,t)),e.isPreserve&&e.store.time&&e.$.find("li:not(.tree-action-item)").each(function(){var t=d(this);e[e.store[t.data("id")]?"expand":"collapse"](t,!0,!0)})},s.prototype._initList=function(e,t,i,n){var o=this;e.hasClass("tree")?(i=0,t=null):((t=(t||e.closest("li")).addClass("has-list")).find(".list-toggle").length||t.prepend(this.options.toggleTemplate),i=i||t.data("idx"));var a=e.attr("data-idx",i||0).children("li:not(.tree-action-item)").each(function(t){o._initItem(d(this),t+1,e)});1!==a.length||a.find("ul").length||a.addClass("tree-single-item");var s=c((n=n||(t?t.data():null))?n.actions:null,this.actions);if(s){if(s.add&&!1!==s.add.templateInList){var r=e.children("li.tree-action-item");r.length?r.detach().appendTo(e):d('<li class="tree-action-item"/>').append(p(s.add,"add",s.add.templateInList)).appendTo(e)}s.sort&&e.sortable(d.extend({dragCssClass:"tree-drag-holder",trigger:".sort-handler",selector:"li:not(.tree-action-item)",finish:function(t){o.callEvent("action",{action:s.sort,$list:e,target:t.target,item:n})}},s.sort.options,d.isPlainObject(this.options.sortable)?this.options.sortable:null))}t&&(t.hasClass("open")||n&&n.open)&&t.addClass("open in")},s.prototype._initItem=function(t,e,i,n){if(void 0===e){var o=t.prev("li");e=o.length?o.data("idx")+1:1}if(i=i||t.closest("ul"),t.attr("data-idx",e).removeClass("tree-single-item"),!t.data("id")){var a=e;i.hasClass("tree")||(a=i.parent("li").data("id")+"-"+a),t.attr("data-id",a)}var s=c((n=n||t.data()).actions,this.actions);if(s){var r=t.find(".tree-actions");r.length||(r=d('<div class="tree-actions"/>').appendTo(this.options.itemWrapper?t.find(".tree-item-wrapper"):t),d.each(s,function(t,e){e&&r.append(p(e,t))}))}var l=t.children("ul");l.length&&this._initList(l,t,e,n)},s.prototype._init=function(){var t=this.options,n=this;this.actions=c(t.actions),this.$.addClass("tree"),t.animate&&this.$.addClass("tree-animate"),this._initList(this.$);var e=t.initialState,i=d.zui&&d.zui.store&&d.zui.store.enable;i&&(this.selector=a+"::"+(t.name||"")+"#"+(this.$.attr("id")||o++),this.store=d.zui.store[t.name?"get":"pageGet"](this.selector,{})),"preserve"===e&&(i?this.isPreserve=!0:this.options.initialState=e="normal"),this.reload(t.data),i&&(this.isPreserve=!0),"expand"===e?this.expand():"collapse"===e&&this.collapse(),this.$.on("click",'.list-toggle,a[href="#"],.tree-toggle',function(t){var e=d(this),i=e.parent("li");n.callEvent("hit",{target:i,item:i.data()}),n.toggle(i),e.is("a")&&t.preventDefault()}).on("click",".tree-action",function(){var t=d(this),e=t.data();if(e.action&&(e=e.action),"sort"!==e.type){var i=t.closest("li:not(.tree-action-item)");n.callEvent("action",{action:e,target:this,$item:i,item:i.data()})}})},s.prototype.preserve=function(t,e,i){if(this.isPreserve)if(t)e=e||t.data("id"),(i=void 0===i&&t.hasClass("open"))?this.store[e]=i:delete this.store[e],this.store.time=(new Date).getTime(),d.zui.store[this.options.name?"set":"pageSet"](this.selector,this.store);else{var n=this;this.store={},this.$.find("li").each(function(){n.preserve(d(this))})}},s.prototype.expand=function(t,e,i){t?(t.addClass("open"),!e&&this.options.animate?setTimeout(function(){t.addClass("in")},10):t.addClass("in")):t=this.$.find("li.has-list").addClass("open in"),i||this.preserve(t),this.callEvent("expand",t,this)},s.prototype.show=function(t,n,o){var a=this;t.each(function(){var t=d(this);if(a.expand(t,n,o),t)for(var e=t.parent("ul");e&&e.length&&!e.hasClass("tree");){var i=e.parent("li");i.length?(a.expand(i,n,o),e=i.parent("ul")):e=!1}})},s.prototype.collapse=function(t,e,i){t?!e&&this.options.animate?(t.removeClass("in"),setTimeout(function(){t.removeClass("open")},300)):t.removeClass("open in"):t=this.$.find("li.has-list").removeClass("open in"),i||this.preserve(t),this.callEvent("collapse",t,this)},s.prototype.toggle=function(t){var e=t&&t.hasClass("open")||!1===t||void 0===t&&this.$.find("li.has-list.open").length;this[e?"collapse":"expand"](t)},s.prototype.getOptions=function(t){this.options=d.extend({},s.DEFAULTS,this.$.data(),t),null===this.options.animate&&this.$.hasClass("tree-animate")&&(this.options.animate=!0)},s.prototype.toData=function(t,n){d.isFunction(t)&&(n=t,t=null),t=t||this.$;var o=this;return t.children("li:not(.tree-action-item)").map(function(){var t=d(this),e=t.data();delete e["zui.droppable"];var i=t.children("ul");return i.length&&(e.children=o.toData(i)),d.isFunction(n)?n(e,t):e}).get()},s.prototype.callEvent=function(t,e){var i;return d.isFunction(this.options[t])&&(i=this.options[t](e,this)),this.$.trigger(d.Event(t+"."+this.name,e)),i},d.fn.tree=function(n,o){return this.each(function(){var t=d(this),e=t.data(a),i="object"==(void 0===n?"undefined":_typeof(n))&&n;e||t.data(a,e=new s(this,i)),"string"==typeof n&&e[n](o)})},d.fn.tree.Constructor=s,d(function(){d('[data-ride="tree"]').tree()})}(jQuery);