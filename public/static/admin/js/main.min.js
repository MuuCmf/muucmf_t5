"use strict";!function(s,n,t){var o=function(t){t.url&&(t.msg+="，页面即将跳转～"),1==t.code?toast.success(t.msg,"success"):toast.error(t.msg,"danger");"refresh"==t.url?setTimeout(function(){location.href=location.href},1e3):t.url&&setTimeout(function(){location.href=t.url},1e3)},l=function(t,e){""==t&&(t="确认执行该操作？");var i='<div class="modal fade confirm-modal" id="tip_Modal"><div class="modal-dialog modal-tip"><div class="modal-content"><div class="modal-body">'+('<div class="text-center"><i class="fa fa-exclamation-circle"></i><p class="title">系统提示</p><p class="desc">'+t+'</p><div class="text-center"><button class="btn btn-info confirm margin-right" type="button">确认</button><button type="button" class="btn" data-dismiss="modal">取消</button></div></div>')+"</div></div></div></div>";return 0==s("#tip_Modal").length&&s("body").append(i),s("#tip_Modal").modal("show"),s("#tip_Modal").off("click",".confirm"),s("#tip_Modal").on("click",".confirm",function(){"function"==typeof e&&e(),s('[data-dismiss="modal"]').click(),s("#tip_Modal").remove(),s(".modal-backdrop").remove()}),!1};s(document).ready(function(){s(document).on("click",".ajax-post",function(t){t.preventDefault();var e=s(this).attr("target-form");if(e){var i=s("."+e).serialize();if(""==i)return toast.error("请勾选操作对象!。","danger"),!1}var a=s(this).attr("href");if(s(this).attr("url")&&(a=s(this).attr("url")),s(this).attr("data-url")&&(a=s(this).attr("data-url")),s(this).attr("data-confirm")||s(this).hasClass("confirm")){var n=s(this).attr("data-confirm");n=n||"确认要执行该操作吗?"}if(n)return l(n,function(){r()}),!1;function r(){s.post(a,i,function(t,e,i){o(t)})}r()}),s(document).on("click",".ajax-get",function(t){t.preventDefault();var e=s(this).attr("target-form");if(e&&""==s("."+e).serialize())return toast.error("请勾选操作对象!。","danger"),!1;var i=s(this).attr("href");if(s(this).attr("url")&&(i=s(this).attr("url")),s(this).attr("data-url")&&(i=s(this).attr("data-url")),s(this).attr("data-confirm")||s(this).hasClass("confirm")){var a=s(this).attr("data-confirm");a=a||"确认要执行该操作吗?"}if(a)return l(a,function(){n()}),!1;function n(){s.get(i,function(t){o(t)})}n()}),s(document).on("submit","form.ajax-form",function(t){t.preventDefault();var e=s(this).attr("data-confirm"),a=s(this);if(""==a.serialize())return toast.hideLoading(),toast.error("请勾选操作对象!。","danger"),!1;if(e)return l(e,function(){i()}),!1;function i(){s("[type=submit]",a).addClass("disabled");var t=a.attr("action"),e=a.attr("method");t||(t=n.location.href),e||(e="get");var i=a.serialize();("post"==e?s.post:s.get)(t,i,function(t){o(t),s("[type=submit]",a).removeClass("disabled")})}return i(),!1})}),n.handleAjax=o,n.handle_ajax=o,n.modal_confirm=l}(jQuery,window),function(a,t,e){var n=function(){a(".nav-type").unbind("change"),a(".nav-type").change(function(){var t=a(this);switch(t.val()){case"module":t.closest("li>div").children("select.module").show().change(),t.closest("li>div").children("input.url").hide();break;case"custom":t.closest("li>div").children("select.module").hide(),t.closest("li>div").children("input.url").show(),t.closest("li>div").children("input.title").val(""),t.closest("li>div").children("input.url").val("")}}),a(".module").unbind("change"),a(".module").change(function(){var t=a(this),e=t.find("option:selected").text(),i=t.val();t.closest("li>div").children("input.title").val(e),t.closest("li>div").children("input.url").val(i),t.closest("li>div").next().children("select.chosen-icons").attr("data-value","icon-"+t.find("option:selected").data("icon")),n()}),a(".add-new").unbind("click"),a(".add-new").click(function(){a(".channel-ul").append(a("#one-nav").html()),n()}),a(".add-one").unbind("click"),a(".add-one").click(function(){a(this).closest(".pLi").after(a("#one-nav").html()),n()}),a(".add-two").unbind("click"),a(".add-two").click(function(){a(this).closest("li").after(a("#two-nav").html()),n()}),a(".remove-li").unbind("click"),a(".remove-li").click(function(){1<a(this).parents("form").find(".pLi").length?(a(this).closest("li").remove(),n()):toast.error("不能再减了~")}),a(".add-child").unbind("click"),a(".add-child").click(function(){0==a(this).closest("li").find(".ul-2").length&&a(this).closest("li").append('<div class="clearfix"></div><ul class="ul-2"  style="display: block;"></ul>'),a(this).closest("li").find(".ul-2").prepend(a("#two-nav").html()),n()}),a(".channel-ul .pLi").each(function(t,e){a(this).attr("data-id",t),a(this).find(".sort").val(a(this).attr("data-order"))}),a(".ul-2 li").each(function(t,e){a(this).find(".pid").val(a(this).parents(".pLi").attr("data-id")),a(this).find(".sort").val(a(this).attr("data-order"))}),a(".channel-ul").off("click").on("click","label.target-blank",function(t){t.preventDefault(),a(this).prev().prop("checked")?(a(this).prev().prop("checked",!1),a(this).closest(".new-blank").find(".target_input").val(0)):(a(this).prev().prop("checked",!0),a(this).closest(".new-blank").find(".target_input").val(1))})};n();a.muu({channel_sort:function(){a(".channel-ul").sortable({trigger:".sort-handle-1",selector:"li",dragCssClass:"",finish:function(){n()}}),a(".channel-ul .ul-2").sortable({trigger:".sort-handle-2",selector:"li",dragCssClass:"",finish:function(){n()}})},channel_bind_color:function(){a(".simpleColorContainer").remove(),a(".simple_color_callback").simpleColor({boxWidth:15,boxHeight:15,cellWidth:15,cellHeight:15,chooserCSS:{"z-index":1200},displayCSS:{border:0}})}})}(jQuery,window),$(function(){$(".check-all").click(function(){$(".ids").prop("checked",this.checked)}),$(".ids").click(function(){$(".ids").each(function(t){if(!this.checked)return $(".check-all").prop("checked",!1),!1;$(".check-all").prop("checked",!0)})}),$(".text").focus(function(){$(this).addClass("focus")}).blur(function(){$(this).removeClass("focus")}),$("textarea").focus(function(){$(this).closest(".textarea").addClass("focus")}).blur(function(){$(this).closest(".textarea").removeClass("focus")})});var admin_image={removeImage:function(t,e){this.upAttachVal("del",e,t),t.parents(".each").remove()},upAttachVal:function(t,e,i){var a=i.parents(".controls").find(".attach"),n=a.val().split(","),r=[];for(var s in n)""!==n[s]&&n[s]!==e.toString()&&r.push(n[s]);return"add"===t&&r.push(e),a.val(r.join(",")),r}};!function(s){var t=window.Think={};t||s.error("ThinkPHP基础配置没有正确加载！"),t.parse_url=function(t){var e=t.match(/^(?:([a-z]+):\/\/)?([\w-]+(?:\.[\w-]+)+)?(?::(\d+))?([\w-\/]+)?(?:\?((?:\w+=[^#&=\/]*)?(?:&\w+=[^#&=\/]*)*))?(?:#([\w-]+))?$/i);return e||s.error("url格式不正确！"),{scheme:e[1],host:e[2],port:e[3],path:e[4],query:e[5],fragment:e[6]}},t.parse_str=function(t){var e,i=t.split("&"),a={};for(val in i)a[(e=i[val].split("="))[0]]=e[1];return a},t.parse_name=function(t,e){return e?(t.replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),t.replace(/[a-z]/,function(t){return t.toUpperCase()})):0===(t=t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})).indexOf("_")&&(t=t.substr(1)),t},t.Url=function(t,e,i){var a=this.parse_url(t),n=[],r={};return a.path||s.error("url格式错误！"),0===(t=a.path).indexOf("/")?(0==this.MODEL[0]&&s.error("该URL模式不支持使用路由!("+t+")"),"/"==t.substr(-1)&&(t=t.substr(0,t.length-1)),t="/"+(t="/"==this.DEEP?t.substr(1):t.substr(1).replace(/\//g,this.DEEP))):((n=[(n=t.split("/")).pop(),n.pop(),n.pop()].reverse())[1]||s.error("ThinkPHP.Url("+t+")没有指定控制器"),n[0]&&(r[this.VAR[0]]=this.MODEL[1]?n[0].toLowerCase():n[0]),r[this.VAR[1]]=this.MODEL[1]?this.parse_name(n[1]):n[1],r[this.VAR[2]]=n[2].toLowerCase(),t="?"+s.param(r)),"string"==typeof e?e=this.parse_str(e):s.isPlainObject(e)||(e={}),a.query&&s.extend(e,this.parse_str(a.query)),e&&(t+="&"+s.param(e)),0!=this.MODEL[0]&&(t=t.replace("?"+(n[0]?this.VAR[0]:this.VAR[1])+"=","/").replace("&"+this.VAR[1]+"=",this.DEEP).replace("&"+this.VAR[2]+"=",this.DEEP).replace(/(\w+=&)|(&?\w+=$)/g,"").replace(/[&=]/g,this.DEEP),!1!==i&&(i=i||this.MODEL[2].split("|")[0])&&(t+="."+i)),t=this.APP+t},t.setValue=function(t,e){var i,a,n=t.substr(0,1),r=0;if(""!==e)if((i=s("#"===n||"."===n?t:"[name='"+t+"']")).eq(0).is(":radio"))i.filter("[value='"+e+"']").each(function(){this.checked=!0});else if(i.eq(0).is(":checkbox"))for(s.isArray(e)?a=e:(a=new Array)[0]=e,r=0,len=a.length;r<len;r++)i.filter("[value='"+a[r]+"']").each(function(){this.checked=!0});else i.val(e)}}(jQuery),$(function(){var t=$('[data-toggle="can_update"]').val(),e=$('[data-toggle="version"]').val();1==t&&$.get("https://www.muucmf.cn/muucmf/sysupdate/index/enable_version/"+e,function(t){t.code&&new $.zui.Messager("有新的版本更新！",{type:"danger",icon:"bell",placement:"bottom",time:1e4,actions:[{name:"update",icon:"chevron-right",text:"去更新",action:function(){return!(window.location.href="/admin/update/index.html")}}]}).show()})}),$(function(){var t={host:$('[data-toggle="server_name"]').val(),ip:$('[data-toggle="server_ip"]').val(),version:$('[data-toggle="version"]').val(),v:"T5"};$.post("https://www.muucmf.cn/muucmf/index/feedback",t,function(t){})});