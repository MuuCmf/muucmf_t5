{extend name="common/base"/}

{block name="header"}
    <li class="active"><span>1</span>{:lang('Protocols')}</li>
    <li class="active"><span>2</span>{:lang('Detection')}</li>
    <li><span>3</span>{:lang('Database')}</li>
    <li><span>4</span>{:lang('Install')}</li>
    <li><span>5</span>{:lang('Complete')}</li>
{/block}
{block name="body"}
    <h1>{:lang('Detection')}</h1>
    <table class="table">
        <caption>
            <h2>运行环境检查</h2>
        </caption>
        <thead>
            <tr>
                <th>项目</th>
                <th>所需配置</th>
                <th>当前配置</th>
            </tr>
        </thead>
        <tbody>
            
            {volist name="muu_env" id="item"}
                <tr>
                    <td>{$item.name}</td>
                    <td>{$item.need}</td>
                    <td><i class="icon-{$item['icon']}">&nbsp;</i>{$item['version']}</td>       
                </tr>
            {/volist}
        </tbody>
    </table>
    {notempty name="dirfile"}
	<present name="dirfile">
    <table class="table">
        <caption><h2>目录、文件权限检查</h2></caption>
        <thead>
            <tr>
                <th>目录/文件</th>
                <th>所需状态</th>
                <th>当前状态</th>
            </tr>
        </thead>
        <tbody>
            {volist name="dirfile" id="item"}
                <tr>
                    <td>{$item[3]}</td>
                    <td><i class="icon-ok">&nbsp;</i>可写</td>
                    <td><i class="icon-{$item[2]}">&nbsp;</i>{$item[1]}</td>
                </tr>
            {/volist}
        </tbody>
    </table>
	</present>
    {/notempty}
    <table class="table">
        <caption><h2>函数依赖性检查</h2></caption>
        <thead>
            <tr>
                <th>函数名称</th>
                <th>检查结果</th>
            </tr>
        </thead>
        <tbody>
            {volist name="func" id="item"}
                <tr>
                    <td>{$item[0]}()</td>
                    <td><i class="icon-{$item[2]}">&nbsp;</i>{$item[1]}</td>
                </tr>
            {/volist}
        </tbody>
    </table>
{/block}

{block name="footer"}
    <a class="btn btn-block btn-primary btn-large" href="{:Url('Install/step2')}">{:lang('NEXT')}</a>
    <a class="btn btn-default btn-block btn-large" style="background: white;" href="{:Url('Index/index')}">{:lang('PREVIOUS')}</a>
{/block}
