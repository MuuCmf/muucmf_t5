"use strict";function check(t,e){var r=$("#expand_"+e).val(),n=t.getAttribute("text_type"),a=t.getAttribute("require");if(0==r.length){if("1"==a)return check_error(e,"该项不能为空"),!1}else switch(n){case"number":var c=new RegExp("^[0-9]*$"),i=t.getAttribute("min_length"),u=t.getAttribute("max_length");return c.test(r)?0!=i&&r.length<i||0!=u&&r.length>u?(check_error(e,"数字长度必须在"+i+"-"+u+"之间"),!1):(check_success(e,t.parent("form")),!0):(check_error(e,"输入内容必须为数字"),!1);case"phone":return(c=/^(1[3|4|5|8])[0-9]{9}$/).test(r)?(check_success(e,t.parent("form")),!0):(check_error(e,"请输入正确的手机号码"),!1);case"email":return(c=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/).test(r)?(check_success(e,t.parent("form")),!0):(check_error(e,"请输入正确的邮箱地址"),!1);case"string":i=t.getAttribute("min_length"),u=t.getAttribute("max_length");return 0!=i&&r.length<i||0!=u&&r.length>u?(0==u&&(u=""),check_error(e,"长度必须在"+i+"-"+u+"之间"),!1):(check_success(e,t.parent("form")),!0)}}function check_error(t,e){$("#alert_"+t).show(),$("#label_"+t).html(e),$("#canSubmit_"+t).val(0),$("#submit_btn").removeClass("btn-primary"),$("#submit_btn").addClass("btn-default")}function check_success(t,e){$("#alert_"+t).hide(),$("#label_"+t).html(""),$("#canSubmit_"+t).val(1),checkCanSubmit(e)}function check_textarea(t,e){var r=document.getElementById("expand_"+e).value,n=t.getAttribute("require");if(0==r.length){if("1"==n)return check_error(e,"该项不能为空"),!1}else{var a=t.getAttribute("min_length"),c=t.getAttribute("max_length");if(0!=a&&r.length<a||0!=c&&r.length>c)return 0==c&&(c=""),check_error(e,"文本长度必须在"+a+"-"+c+"之间"),!1}return check_success(e,$(this).parent("form")),!0}function checkCanSubmit(t){var e=!0;return t.find(".canSubmit").each(function(){0==$(this).val()&&(e=!1)}),e?(t.find("#submit_btn").removeClass("btn-default"),t.find("#submit_btn").addClass("btn-primary"),!0):(t.find("#submit_btn").removeClass("btn-primary"),t.find("#submit_btn").addClass("btn-default"),!1)}$(document).ready(function(){$("#submit_btn").click(function(t){if(!checkCanSubmit($(this).parent("form")))return t.preventDefault(),!1})}),$(function(){$('[data-role="exchange"]').click(function(){var t=$(this).attr("data-id");t<=0&&toast.error("请选择兑换类型！");var e=$(this).attr("data-title");new $.zui.ModalTrigger({type:"ajax",url:url("Ucenter/Invite/exchange")+"&id="+t,title:"兑换 "+e+" 邀请名额"}).show()}),$('[data-role="create_invite"]').click(function(){var t=$(this).attr("data-id");t<=0&&toast.error("请选择要生成的类型！");var e=$(this).attr("data-title");new $.zui.ModalTrigger({type:"ajax",url:url("ucenter/Invite/createCode")+"&id="+t,title:"生成 "+e+" 邀请码"}).show(),myModalTrigger.show()}),$('[data-role="back_copy_code"]').click(function(){if(confirm("确定退还邀请码？")){var t=$(this).attr("data-id");$.post(url("ucenter/Invite/backCode"),{id:t},function(t){t.status?(toast.success("操作成功！"),setTimeout(function(){window.location.reload()},1500)):handleAjax(t)},"json")}})});